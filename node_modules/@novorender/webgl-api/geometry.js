const A=Symbol("Comlink.proxy"),e=Symbol("Comlink.endpoint"),t=Symbol("Comlink.releaseProxy"),s=Symbol("Comlink.thrown"),i=A=>"object"==typeof A&&null!==A||"function"==typeof A,n=new Map([["proxy",{canHandle:e=>i(e)&&e[A],serialize(A){const{port1:e,port2:t}=new MessageChannel;return r(A,e),[t,[t]]},deserialize:A=>(A.start(),a(A))}],["throw",{canHandle:A=>i(A)&&s in A,serialize({value:A}){let e;return e=A instanceof Error?{isError:!0,value:{message:A.message,name:A.name,stack:A.stack}}:{isError:!1,value:A},[e,[]]},deserialize(A){if(A.isError)throw Object.assign(new Error(A.value.message),A.value);throw A.value}}]]);function r(A,e=self){e.addEventListener("message",(function t(i){if(!i||!i.data)return;const{id:n,type:a,path:w}=Object.assign({path:[]},i.data),B=(i.data.argumentList||[]).map(b);let I;try{const e=w.slice(0,-1).reduce(((A,e)=>A[e]),A),t=w.reduce(((A,e)=>A[e]),A);switch(a){case"GET":I=t;break;case"SET":e[w.slice(-1)[0]]=b(i.data.value),I=!0;break;case"APPLY":I=t.apply(e,B);break;case"CONSTRUCT":I=g(new t(...B));break;case"ENDPOINT":{const{port1:e,port2:t}=new MessageChannel;r(A,t),I=c(e,[e])}break;case"RELEASE":I=void 0;break;default:return}}catch(A){I={value:A,[s]:0}}Promise.resolve(I).catch((A=>({value:A,[s]:0}))).then((A=>{const[s,i]=l(A);e.postMessage(Object.assign(Object.assign({},s),{id:n}),i),"RELEASE"===a&&(e.removeEventListener("message",t),o(e))}))})),e.start&&e.start()}function o(A){(function(A){return"MessagePort"===A.constructor.name})(A)&&A.close()}function a(A,e){return B(A,[],e)}function w(A){if(A)throw new Error("Proxy has been released and is not useable")}function B(A,s=[],i=function(){}){let n=!1;const r=new Proxy(i,{get(e,i){if(w(n),i===t)return()=>h(A,{type:"RELEASE",path:s.map((A=>A.toString()))}).then((()=>{o(A),n=!0}));if("then"===i){if(0===s.length)return{then:()=>r};const e=h(A,{type:"GET",path:s.map((A=>A.toString()))}).then(b);return e.then.bind(e)}return B(A,[...s,i])},set(e,t,i){w(n);const[r,o]=l(i);return h(A,{type:"SET",path:[...s,t].map((A=>A.toString())),value:r},o).then(b)},apply(t,i,r){w(n);const o=s[s.length-1];if(o===e)return h(A,{type:"ENDPOINT"}).then(b);if("bind"===o)return B(A,s.slice(0,-1));const[a,C]=I(r);return h(A,{type:"APPLY",path:s.map((A=>A.toString())),argumentList:a},C).then(b)},construct(e,t){w(n);const[i,r]=I(t);return h(A,{type:"CONSTRUCT",path:s.map((A=>A.toString())),argumentList:i},r).then(b)}});return r}function I(A){const e=A.map(l);return[e.map((A=>A[0])),(t=e.map((A=>A[1])),Array.prototype.concat.apply([],t))];var t}const C=new WeakMap;function c(A,e){return C.set(A,e),A}function g(e){return Object.assign(e,{[A]:!0})}function l(A){for(const[e,t]of n)if(t.canHandle(A)){const[s,i]=t.serialize(A);return[{type:"HANDLER",name:e,value:s},i]}return[{type:"RAW",value:A},C.get(A)||[]]}function b(A){switch(A.type){case"HANDLER":return n.get(A.name).deserialize(A.value);case"RAW":return A.value}}function h(A,e,t){return new Promise((s=>{const i=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");A.addEventListener("message",(function e(t){t.data&&t.data.id&&t.data.id===i&&(A.removeEventListener("message",e),s(t.data))})),A.start&&A.start(),A.postMessage(Object.assign({id:i},e),t)}))}var d="undefined"!=typeof Float32Array?Float32Array:Array;function u(){var A=new d(9);return d!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[5]=0,A[6]=0,A[7]=0),A[0]=1,A[4]=1,A[8]=1,A}function m(A,e){var t=e[0],s=e[1],i=e[2],n=e[3],r=e[4],o=e[5],a=e[6],w=e[7],B=e[8],I=e[9],C=e[10],c=e[11],g=e[12],l=e[13],b=e[14],h=e[15],d=t*o-s*r,u=t*a-i*r,m=t*w-n*r,D=s*a-i*o,f=s*w-n*o,Q=i*w-n*a,E=B*l-I*g,T=B*b-C*g,v=B*h-c*g,M=I*b-C*l,p=I*h-c*l,y=C*h-c*b,F=d*y-u*p+m*M+D*v-f*T+Q*E;return F?(F=1/F,A[0]=(o*y-a*p+w*M)*F,A[1]=(a*v-r*y-w*T)*F,A[2]=(r*p-o*v+w*E)*F,A[3]=(i*p-s*y-n*M)*F,A[4]=(t*y-i*v+n*T)*F,A[5]=(s*v-t*p-n*E)*F,A[6]=(l*Q-b*f+h*D)*F,A[7]=(b*m-g*Q-h*u)*F,A[8]=(g*f-l*m+h*d)*F,A):null}function D(){var A=new d(16);return d!=Float32Array&&(A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[11]=0,A[12]=0,A[13]=0,A[14]=0),A[0]=1,A[5]=1,A[10]=1,A[15]=1,A}function f(A,e,t){var s=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],w=e[6],B=e[7],I=e[8],C=e[9],c=e[10],g=e[11],l=e[12],b=e[13],h=e[14],d=e[15],u=t[0],m=t[1],D=t[2],f=t[3];return A[0]=u*s+m*o+D*I+f*l,A[1]=u*i+m*a+D*C+f*b,A[2]=u*n+m*w+D*c+f*h,A[3]=u*r+m*B+D*g+f*d,u=t[4],m=t[5],D=t[6],f=t[7],A[4]=u*s+m*o+D*I+f*l,A[5]=u*i+m*a+D*C+f*b,A[6]=u*n+m*w+D*c+f*h,A[7]=u*r+m*B+D*g+f*d,u=t[8],m=t[9],D=t[10],f=t[11],A[8]=u*s+m*o+D*I+f*l,A[9]=u*i+m*a+D*C+f*b,A[10]=u*n+m*w+D*c+f*h,A[11]=u*r+m*B+D*g+f*d,u=t[12],m=t[13],D=t[14],f=t[15],A[12]=u*s+m*o+D*I+f*l,A[13]=u*i+m*a+D*C+f*b,A[14]=u*n+m*w+D*c+f*h,A[15]=u*r+m*B+D*g+f*d,A}function Q(A,e,t){var s,i,n,r,o,a,w,B,I,C,c,g,l=t[0],b=t[1],h=t[2];return e===A?(A[12]=e[0]*l+e[4]*b+e[8]*h+e[12],A[13]=e[1]*l+e[5]*b+e[9]*h+e[13],A[14]=e[2]*l+e[6]*b+e[10]*h+e[14],A[15]=e[3]*l+e[7]*b+e[11]*h+e[15]):(s=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],w=e[6],B=e[7],I=e[8],C=e[9],c=e[10],g=e[11],A[0]=s,A[1]=i,A[2]=n,A[3]=r,A[4]=o,A[5]=a,A[6]=w,A[7]=B,A[8]=I,A[9]=C,A[10]=c,A[11]=g,A[12]=s*l+o*b+I*h+e[12],A[13]=i*l+a*b+C*h+e[13],A[14]=n*l+w*b+c*h+e[14],A[15]=r*l+B*b+g*h+e[15]),A}function E(A,e){return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=0,A[9]=0,A[10]=1,A[11]=0,A[12]=e[0],A[13]=e[1],A[14]=e[2],A[15]=1,A}function T(A,e){var t=Math.sin(e),s=Math.cos(e);return A[0]=1,A[1]=0,A[2]=0,A[3]=0,A[4]=0,A[5]=s,A[6]=t,A[7]=0,A[8]=0,A[9]=-t,A[10]=s,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function v(A,e){var t=Math.sin(e),s=Math.cos(e);return A[0]=s,A[1]=0,A[2]=-t,A[3]=0,A[4]=0,A[5]=1,A[6]=0,A[7]=0,A[8]=t,A[9]=0,A[10]=s,A[11]=0,A[12]=0,A[13]=0,A[14]=0,A[15]=1,A}function M(A,e){return A[0]=e[12],A[1]=e[13],A[2]=e[14],A}Math.hypot||(Math.hypot=function(){for(var A=0,e=arguments.length;e--;)A+=arguments[e]*arguments[e];return Math.sqrt(A)});var p=f;function y(){var A=new d(3);return d!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A}function F(A){var e=A[0],t=A[1],s=A[2];return Math.hypot(e,t,s)}function U(A,e,t){var s=new d(3);return s[0]=A,s[1]=e,s[2]=t,s}function z(A,e){return A[0]=e[0],A[1]=e[1],A[2]=e[2],A}function x(A,e,t,s){return A[0]=e,A[1]=t,A[2]=s,A}function j(A,e,t){return A[0]=e[0]+t[0],A[1]=e[1]+t[1],A[2]=e[2]+t[2],A}function L(A,e,t){return A[0]=e[0]-t[0],A[1]=e[1]-t[1],A[2]=e[2]-t[2],A}function J(A,e,t){return A[0]=Math.min(e[0],t[0]),A[1]=Math.min(e[1],t[1]),A[2]=Math.min(e[2],t[2]),A}function S(A,e,t){return A[0]=Math.max(e[0],t[0]),A[1]=Math.max(e[1],t[1]),A[2]=Math.max(e[2],t[2]),A}function O(A,e,t){return A[0]=e[0]*t,A[1]=e[1]*t,A[2]=e[2]*t,A}function H(A,e,t,s){var i=e[0],n=e[1],r=e[2];return A[0]=i+s*(t[0]-i),A[1]=n+s*(t[1]-n),A[2]=r+s*(t[2]-r),A}function K(A,e,t){var s=e[0],i=e[1],n=e[2],r=t[3]*s+t[7]*i+t[11]*n+t[15];return r=r||1,A[0]=(t[0]*s+t[4]*i+t[8]*n+t[12])/r,A[1]=(t[1]*s+t[5]*i+t[9]*n+t[13])/r,A[2]=(t[2]*s+t[6]*i+t[10]*n+t[14])/r,A}function N(A,e,t){var s=e[0],i=e[1],n=e[2];return A[0]=s*t[0]+i*t[3]+n*t[6],A[1]=s*t[1]+i*t[4]+n*t[7],A[2]=s*t[2]+i*t[5]+n*t[8],A}function k(A,e){return A[0]===e[0]&&A[1]===e[1]&&A[2]===e[2]}var G=L,Y=F;function P(){var A=new d(4);return d!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0,A[3]=0),A}function R(A,e,t,s){var i=new d(4);return i[0]=A,i[1]=e,i[2]=t,i[3]=s,i}function V(A,e){return A[0]=e[0],A[1]=e[1],A[2]=e[2],A[3]=e[3],A}function W(A,e,t,s,i){return A[0]=e,A[1]=t,A[2]=s,A[3]=i,A}function X(A,e){return A[0]*e[0]+A[1]*e[1]+A[2]*e[2]+A[3]*e[3]}function Z(A,e,t,s){var i=e[0],n=e[1],r=e[2],o=e[3];return A[0]=i+s*(t[0]-i),A[1]=n+s*(t[1]-n),A[2]=r+s*(t[2]-r),A[3]=o+s*(t[3]-o),A}function q(){var A=new d(4);return d!=Float32Array&&(A[0]=0,A[1]=0,A[2]=0),A[3]=1,A}y(),P();var _,$,AA,eA,tA=R;function sA(A,e){var t=new d(2);return t[0]=A,t[1]=e,t}function iA(A,e){}y(),U(1,0,0),U(0,1,0),q(),q(),u(),function(){var A;A=new d(2),d!=Float32Array&&(A[0]=0,A[1]=0)}();class nA{size;layout;view;stride;offsets={};constructor(A,e){this.size=A,this.layout=e,this.view=new Float32Array(new ArrayBuffer(A*this.layout.stride)),this.stride=e.stride/4;const{offsets:t}=this;for(const A of e.attributes)t[A.semantic]=A.byteOffset/4}set(A){const{view:e,stride:t,offsets:s}=this,i=s[A];return void 0===i?iA:function(A,s){s&&e.set(s,A*t+i)}}}function rA(){const A=Math.PI/2,e=[D(),D(),D(),D(),D(),D()];var t;return(t=e[0])[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,T(e[1],1*A),T(e[2],2*A),T(e[3],3*A),v(e[4],A),v(e[5],-A),e}function oA(A,e){if(A==e)return!0;if("object"!=typeof A||"object"!=typeof e)return!1;const t=Object.keys(A),s=Object.keys(e);if(t.length!=s.length)return!1;for(let A=0;A<t.length;A++)if(t[A]!=s[A])return!1;for(var i of t)if(A[i],e[i],!oA(A[i],e[i]))return!1;return!0}y(),q(),y();class aA{baseUrl;activeDownloads=0;abortController=new AbortController;static downloadImageFallback;constructor(A){this.baseUrl=A}abort(){this.abortController.abort(),this.abortController=new AbortController}async request(A,e){const t=new URL(A,this.baseUrl);t.search||(t.search=this.baseUrl?.search??"");const s=(e??this.abortController).signal,i=await fetch(t.toString(),{mode:"cors",signal:s});if(!i.ok)throw new Error(`HTTP Error: ${i.status}: ${i.statusText} (${t})`);return i}async downloadJson(A,e){try{this.activeDownloads++;const t=await this.request(A,e);return await t.json()}finally{this.activeDownloads--}}async downloadArrayBuffer(A,e){try{this.activeDownloads++;const t=await this.request(A,e);return await t.arrayBuffer()}finally{this.activeDownloads--}}async downloadBlob(A,e){try{this.activeDownloads++;const t=await this.request(A,e);return await t.blob()}finally{this.activeDownloads--}}async downloadImage(A,e){try{if(this.activeDownloads++,aA.downloadImageFallback){const t="string"==typeof A?new URL(A,this.baseUrl):A;t.search=this.baseUrl?.search??"";const s=await aA.downloadImageFallback(t.toString());if(e?.signal.aborted)throw{name:"AbortError",message:""};return s}{const t=await this.downloadBlob(A,e);return await createImageBitmap(t)}}finally{this.activeDownloads--}}async downloadImageFromBlob(A,e){try{if(this.activeDownloads++,aA.downloadImageFallback){const t=URL.createObjectURL(A),s=await aA.downloadImageFallback(t.toString());if(URL.revokeObjectURL(t),e?.signal.aborted)throw{name:"AbortError",message:""};return s}return await createImageBitmap(A)}finally{this.activeDownloads--}}}class wA{static positions=[U(-1,-1,1),U(1,-1,1),U(-1,1,1),U(1,1,1)];static texcoords=[sA(0,0),sA(1,0),sA(0,1),sA(1,1)];static normal=U(0,0,1);normal=y();centroid=y();mesh;visible=!1;constructor(A,e,t){const s=new nA(4,e.vertexLayout),i=u();m(i,t),N(this.normal,wA.normal,i),K(this.centroid,wA.normal,t);const n=s.set(0),r=s.set(1),o=s.set(4),a=y();for(let A=0;A<4;A++)K(a,wA.positions[A],t),n(A,a),r(A,this.normal),o(A,wA.texcoords[A]);this.mesh=A.createMesh(e,!0,5,s.view.buffer,s.size)}add(){this.mesh.update({visible:!0})}remove(){this.mesh.update({visible:!1})}dispose(){this.mesh.delete()}facesTowards(A){const e=y();return L(e,this.centroid,A),function(A,e){return A[0]*e[0]+A[1]*e[1]+A[2]*e[2]}(e,this.normal)<0}}class BA{static matrices=rA();centroid=y();sides;visible=!1;constructor(A,e){M(this.centroid,e);const t=D(),s=new Array(6);for(let i=0;i<6;i++){f(t,e,BA.matrices[i]);const n=new wA(A.renderContext,A.materials[i],t);s[i]=n}this.sides=s}cull(A,e){const[t,s,i]=this.centroid,n=R(t,s,i,1),r=Math.sqrt(3);let o=!1;for(const A of e)if(X(A,n)>r){o=!0;break}if(this.visible=!o,this.visible)for(const A of this.sides)A.visible=!0}render(){const{visible:A}=this;if(A)for(const A of this.sides)A.visible?A.add():A.visible||A.remove();else for(const A of this.sides)A.remove()}dispose(){for(const A of this.sides)A.dispose()}}class IA{scene;cubes=[];previousGeneration=0;transform=D();constructor(A,e){this.scene=A;const{cubes:t}=this,{radius:s,count:i}=e,n=D();for(let e=0;e<i;e++){const e=new BA(A,n);t.push(e)}}update(A,e,t,s){const{cubes:i,previousGeneration:n}=this,{generation:r,viewFrustum:o,viewModelMatrix:a}=A;if(n!=r){this.previousGeneration=r;const A=y();M(A,a);const{left:e,right:t,top:s,bottom:n}=o,w=[e,t,s,n];for(const e of i)e.cull(A,w),e.render();this.scene.resolved()}return!0}async dispose(){const{cubes:A}=this;for(const e of A)e.dispose()}}(_||(_={})).create=async function(A,e){return new IA(A,e)},function(A){const e=[0,1,5,0,5,4,1,2,6,1,6,5,2,3,7,2,7,6,3,0,4,3,4,7],t=[U(-1,-1,1),U(1,-1,1),U(1,1,1),U(-1,1,1),U(-.99,-.99,1),U(.99,-.99,1),U(.99,.99,1),U(-.99,.99,1)],s=[sA(0,0),sA(1,0),sA(1,1),sA(0,1),sA(.005,.005),sA(.995,.005),sA(.995,.995),sA(.005,.995)],i=rA(),n=U(0,0,1),r=y(),o=t.length,a=e.length;function w(A,i,w,B,I){const C=u();m(C,I),N(r,n,C);const c=A.set(0),g=A.set(1),l=A.set(4),b=y();for(let A=0;A<o;A++){const e=A+i;K(b,t[A],I),c(e,b),g(e,r),l(e,s[A])}for(let A=0;A<a;A++)w[A+B]=e[A]+i}A.create=function(A,e,t,s=!0){const n=y();j(n,t.min,t.max),O(n,n,.5);const r=y();L(r,t.max,t.min),O(r,r,.5),L(r,r,U(.01,.01,.01));const B=D();var I,C,c,g,l,b;Q(B,B,n),I=B,C=B,g=(c=r)[0],l=c[1],b=c[2],I[0]=C[0]*g,I[1]=C[1]*g,I[2]=C[2]*g,I[3]=C[3]*g,I[4]=C[4]*l,I[5]=C[5]*l,I[6]=C[6]*l,I[7]=C[7]*l,I[8]=C[8]*b,I[9]=C[9]*b,I[10]=C[10]*b,I[11]=C[11]*b,I[12]=C[12],I[13]=C[13],I[14]=C[14],I[15]=C[15];const h=new nA(6*o,e.vertexLayout),d=new Uint16Array(6*a),u=D();for(let A=0;A<6;A++)f(u,B,i[A]),w(h,A*o,d,A*a,u);return A.createMesh(e,s,4,h.view.buffer,d)}}($||($={}));class CA{visible=!1;centroid=y();mesh;constructor(A,e,t){this.mesh=$.create(A,e,t)}cull(A){const[e,t,s]=this.centroid,i=R(e,t,s,1),n=Math.sqrt(3);let r=!1;for(const e of A)if(X(e,i)>n){r=!0;break}this.visible=!r}render(){const{visible:A,mesh:e}=this;A?e.update({visible:!0}):e.update({visible:!1})}dispose(){this.mesh.delete()}}class cA{scene;objects=[];previousGeneration=0;constructor(A){this.scene=A;const{objects:e}=this,{renderContext:t}=A,s={min:U(-1,-1,-1),max:U(1,1,1)},i=new CA(t,A.materials[0],s);e.push(i)}update(A,e,t,s){const{objects:i,previousGeneration:n}=this,{generation:r,viewFrustum:o}=A;if(n!=r){this.previousGeneration=r;const{left:A,right:e,top:t,bottom:s}=o,n=[A,e,t,s];for(const A of i)A.cull(n),A.render();this.scene.resolved()}return!0}dispose(){const{objects:A}=this;for(const e of A)e.dispose()}}!function(A){A.assetsPath="assets/test",A.create=async function(A,e){return A.renderContext,new cA(A)}}(AA||(AA={})),function(A){A[A.baseColor=0]="baseColor"}(eA||(eA={}));const gA=new Map([[eA.baseColor,"albedo"]]);class lA{position=0;view;version;constructor(A,e){this.view=new DataView(A),this.version=e}read(A,e){const t=this.view[A](this.position,!0);return this.position+=e,t}get eof(){return this.position==this.view.byteLength}i8(){return this.read("getInt8",1)}u8(){return this.read("getUint8",1)}i16(){return this.read("getInt16",2)}u16(){return this.read("getUint16",2)}i32(){return this.read("getInt32",4)}u32(){return this.read("getUint32",4)}f32(){return this.read("getFloat32",4)}f64(){return this.read("getFloat64",8)}buffer(){const A=this.u32(),e=this.view.buffer.slice(this.position,this.position+A);return this.position+=A,e}vec3(){return U(this.f32(),this.f32(),this.f32())}int3(){return U(this.i32(),this.i32(),this.i32())}double3(){return U(this.f64(),this.f64(),this.f64())}aabb(){return{min:this.vec3(),max:this.vec3()}}boundingSphere(){return{center:this.vec3(),radius:this.f32()}}bounds(){return{box:this.aabb(),sphere:this.boundingSphere()}}attribute(){return{semantic:this.u8(),components:this.u8(),type:this.u16(),normalized:0!==this.u8(),offset:this.i32(),stride:this.u8()}}attributes(){const A=new Array(this.u8());for(let e=0;e<A.length;e++)A[e]=this.attribute();return A}mesh(){const A=this.u32(),e=this.vec3(),t=this.attributes(),s=this.i32(),i=this.i32(),n=this.buffer(),r=i?this.buffer():1*s,o=[],a=[],w=[];if("1.3"!==this.version){a.length=this.i32();for(let A=0;A<a.length;A++)a[A]=this.i32();w.length=a.length;for(let A=0;A<w.length;A++)w[A]=this.i32();o.length=this.i32();for(let A=0;A<o.length;A++)o[A]={semantic:gA.get(this.u32())??"diffuse",transform:(B=this.f32(),I=this.f32(),C=this.f32(),c=this.f32(),g=this.f32(),l=this.f32(),b=this.f32(),h=this.f32(),u=this.f32(),m=void 0,m=new d(9),m[0]=B,m[1]=I,m[2]=C,m[3]=c,m[4]=g,m[5]=l,m[6]=b,m[7]=h,m[8]=u,m),data:this.buffer()}}var B,I,C,c,g,l,b,h,u,m;return{kind:A,center:e,attributes:t,vertices:n,indices:r,numVertices:s,numTriangles:i,textures:o,subnodesCounts:a,subnodesOffsets:w}}object(){const A=this.u32(),e=new Array(this.u32());for(let A=0;A<e.length;A++)e[A]=this.mesh();return{id:A,meshes:e}}baseOctreeNodeData(A){const e=A?this.version>"1.5"?this.double3():this.int3():void 0,t=this.bounds();if(e){const{sphere:A,box:s}=t;j(A.center,A.center,e),j(s.min,s.min,e),j(s.max,s.max,e)}const s=this.u8();return{offset:e,originalBounds:t,childrenByteMask:s,tolerance:s>0?this.i32():0,totalChildrenTriangles:s>0?this.i32():0,totalChildrenVertices:s>0?this.i32():0,totalChildrenTextureBytes:s>0&&"1.3"!==this.version?this.i32():0}}mergedOctreeNodeGeometry(A){let e=0,t=0,s=0,i=0,n=0;const r=new Array(this.u32());for(let A=0;A<r.length;A++){const o=this.mesh();o.textures.length>0&&(s+=o.textures.map((A=>A.data.byteLength)).reduce(((A,e)=>A+e))),i+="number"==typeof o.indices?0:o.indices?.byteLength,n+=o.vertices.byteLength,e+=o.numVertices,t+=o.numTriangles,r[A]=o}return{offset:A,meshes:r,textureBytes:s,indexBytes:i,vertexBytes:n,vertexCount:e,triangleCount:t}}}function bA(A,e,t,s){const i=new lA(t,A),n=[];for(let A=0;A<8;A++)if(e&1<<A){const A=i.baseOctreeNodeData(void 0!==s);n.push(A)}return{children:n,geometry:i.mergedOctreeNodeGeometry(s)}}function hA(A,e,t,s,i){const n=s[i[0]++];if(0==n)A.add(e);else for(let r=0;r<8;r++)n&1<<r&&hA(A,e+r,t+1,s,i)}function dA(A,e){return e.length>0?hA(A,"",0,e,[0]):A.add(""),A}class uA{scene;aabb;boundingSphere;transform=D();meshes=[];modelWorldMatrix=D();constructor(A,e,t,s,i,n,r){this.scene=A,this.aabb=n,this.boundingSphere=r;const{renderContext:o}=A,a=e.map((A=>o.createImage(A))),w=t.map((A=>o.createTexture(a[A.image],A.sampler?{sampler:A.sampler}:void 0))),B=s.map((A=>{const{kind:e,uniforms:t}=A,s=A.textures,i={};for(let A in s){const e=s[A];void 0!==e&&(i[A]=w[e])}return o.createMaterial(e,t,i)}));this.meshes=i.map((A=>{const{material:e,indices:t,vertices:s,renderMode:i,transform:n}=A;return o.createMesh(B[e],!0,i,s,t,void 0,n)}))}updateFromInstance(A){if(A){const{visible:E,position:T,rotation:v,scale:M}=A,{modelWorldMatrix:p}=this;e=p,s=T,i=M,n=(t=v)[0],C=n*(w=n+n),c=n*(B=(r=t[1])+r),g=n*(I=(o=t[2])+o),l=r*B,b=r*I,h=o*I,d=(a=t[3])*w,u=a*B,m=a*I,D=i[0],f=i[1],Q=i[2],e[0]=(1-(l+h))*D,e[1]=(c+m)*D,e[2]=(g-u)*D,e[3]=0,e[4]=(c-m)*f,e[5]=(1-(C+h))*f,e[6]=(b+d)*f,e[7]=0,e[8]=(g+u)*Q,e[9]=(b-d)*Q,e[10]=(1-(C+l))*Q,e[11]=0,e[12]=s[0],e[13]=s[1],e[14]=s[2],e[15]=1;for(const A of this.meshes)A.update({visible:E,modelWorldMatrix:p})}var e,t,s,i,n,r,o,a,w,B,I,C,c,g,l,b,h,d,u,m,D,f,Q}update(A,e,t,s){return!0}async dispose(){for(const A of this.meshes)A.delete();this.meshes.length=0}}function mA(A){const e=new DataView(A,0,12),t=new TextDecoder,s=t.decode(new Uint8Array(A,0,4)),i=e.getUint32(4,!0);if(e.getUint32(8,!0),"glTF"!==s)throw new Error("Unsupported glTF-Binary header.");if(i<2)throw new Error("Unsupported legacy gltf file detected.");let n,r;const o=new DataView(A,12);let a=0;for(;a<o.byteLength;){const e=o.getUint32(a,!0);a+=4;const s=o.getUint32(a,!0);if(a+=4,1313821514===s){const s=new Uint8Array(A,12+a,e);n=t.decode(s),n=n.substr(0,n.lastIndexOf("}")+1)}else if(5130562===s){const t=new Uint8Array(A,12+a,e),s=new Uint8Array(e);s.set(t),r=s.buffer}a+=e}if(!n)throw new Error("glTF-Binary: JSON content not found.");if(!r)throw new Error("glTF-Binary: Binary chunk not found.");return{json:n,buffer:r}}const DA={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},fA={5120:1/255,5121:1/127,5122:1/32767,5123:1/65535,5125:1,5126:1},QA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function EA(A,e,t,s){let i=e;for(let e=t.next();!e.done;e=t.next()){const n=t.next(),r=sA(e.value,n.value);s?.(r),A[i++]=r}}function TA(A,e,t,s){let i=e;for(let e=t.next();!e.done;e=t.next()){const n=t.next(),r=t.next(),o=U(e.value,n.value,r.value);s?.(o),A[i++]=o}}function vA(A,e,t,s=4){let i=e;const n=[1,1,1,1];for(let e=t.next();!e.done;e=t.next()){n[0]=e.value;for(let A=1;A<s;A++)n[A]=t.next().value;const r=R(n[0],n[1],n[2],n[3]);A[i++]=r}}class MA{buffer;byteOffset;byteLength;byteStride;static fromJson(A,e){const{buffer:t,byteOffset:s,byteLength:i,byteStride:n}=e;return new MA(A[t],s??0,i,n)}constructor(A,e,t,s){this.buffer=A,this.byteOffset=e,this.byteLength=t,this.byteStride=s}}class pA{bufferView;byteOffset;componentType;normalized;count;type;min;max;view;numComponents;offset;stride;scale;static fromJson(A,e){const{bufferView:t,byteOffset:s,componentType:i,max:n,min:r,normalized:o,count:a,type:w,sparse:B}=e;return new pA(void 0===t?void 0:A[t],s??0,i,o??!1,a,w,r,n)}constructor(A,e,t,s,i,n,r,o){this.bufferView=A,this.byteOffset=e,this.componentType=t,this.normalized=s,this.count=i,this.type=n,this.min=r,this.max=o;const a=DA[t];this.view=A?new a(A.buffer):void 0;const w=DA[t].BYTES_PER_ELEMENT,B=QA[n],I=A?.byteStride??w*B;this.numComponents=B,this.offset=(e+(A?.byteOffset??0))/w,this.stride=I/w,this.scale=s?fA[t]:1}*iterate(){const{view:A,count:e,offset:t,stride:s,numComponents:i,scale:n}=this;for(let r=0;r<e;r++)for(let e=0;e<i;e++)yield(A?.[t+r*s+e]??0)*n}}class yA{material;vertexLayout;hasIndices;renderMode;bounds;indices;positions=[];normals=[];tangents=[];texcoords0=[];texcoords1=[];colors0_3=[];colors0_4=[];constructor(A,e,t,s){this.material=A,this.vertexLayout=e,this.hasIndices=t,this.renderMode=s,t&&(this.indices=[])}get numVertices(){return this.positions.length}addBounds(A){this.bounds?(J(this.bounds.min,this.bounds.min,A.min),S(this.bounds.max,this.bounds.max,A.max)):this.bounds={min:A.min,max:A.max}}addIndices(A,e){for(const t of A)this.indices.push(t+e)}setPositions(A,e,t){TA(this.positions,e,A,(A=>{K(A,A,t)}))}setNormals(A,e,t){TA(this.normals,e,A,(A=>{N(A,A,t)}))}setTangents(A,e){vA(this.tangents,e,A)}setTexcoords0(A,e){EA(this.texcoords0,e,A)}setTexcoords1(A,e){EA(this.texcoords1,e,A)}setColors0(A,e,t){3==t?TA(this.colors0_3,e,A):vA(this.colors0_4,e,A)}}function FA(A,e){const{meshes:t}=A;let s;if(t)for(const A of t)for(const t of A.primitives)if((t.material??0)==e){const A=t.mode??4;A!==s&&(null==s?s=t.mode:4!==A&&(s=4))}return s??4}class UA{material;transform;renderMode;positions;normals;tangents;texcoords0;texcoords1;color0;indices;bounds;constructor(A,e,t,s,i,n,r,o,a,w){this.material=A,this.transform=e,this.renderMode=t,this.positions=s,this.normals=i,this.tangents=n,this.texcoords0=r,this.texcoords1=o,this.color0=a,this.indices=w;const{min:B,max:I}=s;if(!B||!I)throw new Error("Positions has no min max values!");this.bounds={min:U(B[0],B[1],B[2]),max:U(I[0],I[1],I[2])}}*getCorners(){const{min:A,max:e}=this.bounds;yield U(A[0],A[1],A[2]),yield U(e[0],A[1],A[2]),yield U(A[0],e[1],A[2]),yield U(e[0],e[1],e[2]),yield U(A[0],A[1],e[2]),yield U(e[0],e[1],e[2]),yield U(A[0],e[1],e[2])}get worldSpaceBounds(){const A=U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),e=U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(const t of this.getCorners())K(t,t,this.transform),J(A,A,t),S(e,e,t);return{min:A,max:e}}addToGroup(A,e){const t=u();m(t,e);const s=A.numVertices,{positions:i,normals:n,tangents:r,texcoords0:o,texcoords1:a,color0:w,indices:B}=this;if(A.setPositions(i.iterate(),s,e),n&&A.setNormals(n.iterate(),s,t),r&&A.setTangents(r.iterate(),s),o&&A.setTexcoords0(o.iterate(),s),a&&A.setTexcoords1(a.iterate(),s),w&&A.setColors0(w.iterate(),s,w.numComponents),void 0!==B)A.addIndices(B.iterate(),s);else if(A.hasIndices){const e=i.count;A.addIndices(function*(){for(let A=0;A<e;A++)yield A}(),s)}}}class zA{buffers;gltf;groups;accessors;meshPrimitives=[];constructor(A,e,t){this.buffers=A,this.gltf=e,this.groups=t.map(((A,t)=>new yA(t,A,function(A,e){return A.meshes?.some((A=>A.primitives.some((A=>(A.material??0)==e&&void 0!==A.indices))))??!1}(e,t),FA(e,t))));const s=(e.bufferViews??[]).map((e=>MA.fromJson(A,e)));this.accessors=(e.accessors??[]).map((A=>pA.fromJson(s,A)));const i=e.scenes?.[e.scene??0];if(i){const{nodes:A}=i;if(A)for(const e of A)this.addNode(e)}}addNode(A,e){const{gltf:t,accessors:s,groups:i}=this,n=t.nodes?.[A];if(void 0!==n){const A=function(A){const{matrix:e,translation:t,rotation:s}=A,i=D();if(e)!function(A,e,t,s,i,n,r,o,a,w,B,I,C,c,g,l,b){A[0]=e,A[1]=t,A[2]=s,A[3]=i,A[4]=n,A[5]=r,A[6]=o,A[7]=a,A[8]=w,A[9]=B,A[10]=I,A[11]=C,A[12]=c,A[13]=g,A[14]=l,A[15]=b}(i,...e);else if(t||s){const A=t?U(...t):y();!function(A,e,t){var s=e[0],i=e[1],n=e[2],r=e[3],o=s+s,a=i+i,w=n+n,B=s*o,I=s*a,C=s*w,c=i*a,g=i*w,l=n*w,b=r*o,h=r*a,d=r*w;A[0]=1-(c+l),A[1]=I+d,A[2]=C-h,A[3]=0,A[4]=I-d,A[5]=1-(B+l),A[6]=g+b,A[7]=0,A[8]=C+h,A[9]=g-b,A[10]=1-(B+c),A[11]=0,A[12]=t[0],A[13]=t[1],A[14]=t[2],A[15]=1}(i,s?tA(...s):q(),A)}return i}(n);e&&p(A,e,A);const r=n.mesh;if(void 0!==r){const e=t.meshes?.[r];if(e){const{primitives:n}=e;for(const e of n){const{indices:n,mode:r,material:o}=e,a=i[o??0];if((r??4)!==a.renderMode)continue;const w=(A,i)=>{const n=e.attributes[A];if(void 0!==n)return t.accessors[n],s[n]},B=new UA(o,A,r,w("POSITION","VEC3"),w("NORMAL","VEC3"),w("TANGENT","VEC4"),w("TEXCOORD_0","VEC2"),w("TEXCOORD_1","VEC2"),w("COLOR_0",["VEC3","VEC4"]),void 0!==n?s[n]:void 0);this.meshPrimitives.push(B);const{worldSpaceBounds:I}=B;a.addBounds(I)}}}const{children:o}=n;if(o)for(const e of o)this.addNode(e,A)}}computeAABB(){const{groups:A}=this,e=U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t=U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);let s=A.length>0;for(const i of A)i.bounds?(J(e,e,i.bounds.min),S(t,t,i.bounds.max)):s=!1;return s?{min:e,max:t}:void 0}computeBoundingSphere(){const{groups:A}=this;function*e(){for(const e of A)yield*e.positions}const t={x:U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),y:U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),z:U(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},s={x:U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),y:U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),z:U(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)};for(const A of e()){const[e,i,n]=A;e<t.x[0]&&x(t.x,e,i,n),e>s.x[0]&&x(s.x,e,i,n),i<t.y[1]&&x(t.y,e,i,n),i>s.y[1]&&x(s.y,e,i,n),n<t.z[2]&&x(t.z,e,i,n),n>s.z[2]&&x(s.z,e,i,n)}const i={x:y(),y:y(),z:y()};L(i.x,s.x,t.x),L(i.y,s.y,t.y),L(i.z,s.z,t.z);const n={x:Y(i.x),y:Y(i.y),z:Y(i.z)};let r;r=n.x>n.y&&n.x>n.z?"x":n.y>n.z?"y":"z";const o=y();j(o,s[r],t[r]),O(o,o,.5);let a=.5*n[r];const w=y();for(const A of e()){L(w,A,o);const e=F(w);e>a&&(a=.5*(a+e),O(w,w,1-a/e),j(o,o,w))}return{center:o,radius:a}}*buildStaticGeometry(A){for(const{material:e,vertexLayout:t,numVertices:s,indices:i,positions:n,normals:r,tangents:o,texcoords0:a,texcoords1:w,colors0_3:B,colors0_4:I,renderMode:C,bounds:c}of this.groups){const c=new nA(n.length,t),g=c.set(0),l=c.set(1),b=c.set(2),h=c.set(4),d=c.set(5),u=c.set(12),m=[1,1,1,1];for(let A=0;A<s;A++)g(A,n[A]),r.length&&l(A,r[A]),o.length&&b(A,o[A]),a.length&&h(A,a[A]),w.length&&d(A,w[A]),B.length?u(A,B[A]):I.length?u(A,I[A]):u(A,m);yield{material:e,renderMode:C,transform:A,indices:null==i?s:s<65536?new Uint16Array(i):new Uint32Array(i),vertices:c.view.buffer}}}}function xA(A,e,t,s){const{extensionsRequired:i,extensionsUsed:n}=e;if(n&&0!=n.length&&n[0],i&&0!=i.length&&"KHR_materials_unlit"!=i[0])throw new Error(`The following glTF extensions were required, but are not supported: ${i.join(", ")}!`);const r={kind:"gltf",uniforms:{alphaCutoff:.5,baseColorFactor:[1,1,1,1],baseColorUVSet:-1,roughnessFactor:1,metallicFactor:1,metallicRoughnessUVSet:-1,normalScale:1,normalUVSet:-1,occlusionStrength:1,occlusionUVSet:-1,emissiveFactor:[0,0,0],emissiveUVSet:-1}},o=e.images?.map(((s,i)=>{let n=t[i]??function(t){const s=e.bufferViews[t.bufferView],i=s.byteOffset??0,n=s.byteLength?i+s.byteLength:void 0,r=A[s.buffer].slice(i,n);return new Blob([r])}(s);return s.mimeType&&(n=new Blob([n],{type:s.mimeType})),n}))??[],a=e.samplers?.map((A=>{const{magFilter:e,minFilter:t,wrapS:s,wrapT:i}=A;return{10240:e??9728,10241:t??9728,10242:s??10497,10243:i??10497}}))??[],w=e.textures?.map((A=>({image:A.source,sampler:a[A.sampler]})))??[],B=e.materials?e.materials.map(((A,t)=>{const s=FA(e,t),{pbrMetallicRoughness:i,normalTexture:n,occlusionTexture:o,emissiveTexture:a,emissiveFactor:w,alphaMode:B,alphaCutoff:I,doubleSided:C}=A,c=A.extensions&&"KHR_materials_unlit"in A.extensions;return{kind:0==s?"gltf_p":"BLEND"==B?c?"gltf_unlit_t":"gltf_t":c?"gltf_unlit":"gltf",uniforms:{alphaCutoff:"OPAQUE"==B||"BLEND"==B?0:I??r.uniforms.alphaCutoff,baseColorFactor:i?.baseColorFactor??r.uniforms.baseColorFactor,baseColorUVSet:i?.baseColorTexture?i.baseColorTexture.texCoord??0:r.uniforms.baseColorUVSet,roughnessFactor:i?.roughnessFactor??r.uniforms.roughnessFactor,metallicFactor:i?.metallicFactor??r.uniforms.metallicFactor,metallicRoughnessUVSet:i?.metallicRoughnessTexture?i.metallicRoughnessTexture.texCoord??0:r.uniforms.metallicRoughnessUVSet,normalScale:n?.scale??r.uniforms.normalScale,normalUVSet:n?n.texCoord??0:r.uniforms.normalUVSet,occlusionStrength:o?.strength??r.uniforms.occlusionStrength,occlusionUVSet:o?o.texCoord??0:r.uniforms.occlusionUVSet,emissiveFactor:w??r.uniforms.emissiveFactor,emissiveUVSet:a?a.texCoord??0:r.uniforms.emissiveUVSet},textures:{albedo:i?.baseColorTexture?.index,"metallic+roughness":i?.metallicRoughnessTexture?.index,normal:n?.index,occlusion:o?.index,emissive:a?.index}}})):[r],I=B.map((A=>s(A.kind))),C=[],c=e.scenes?.[e.scene??0],g={center:y(),radius:0};let l;if(void 0!==c){const t=new zA(A,e,I);l=t.computeAABB();const s=y();l&&(j(s,l.min,l.max),O(s,s,.5));const i=D(),n=D();E(n,s);const r=y();h=s,(b=r)[0]=-h[0],b[1]=-h[1],b[2]=-h[2];for(const A of t.meshPrimitives){Q(i,A.transform,r);const e=t.groups[A.material??0];A.addToGroup(e,i)}const{center:o,radius:a}=t.computeBoundingSphere();j(o,o,s),z(g.center,o),g.radius=a,C.push(...t.buildStaticGeometry(n))}var b,h;return{images:o,textures:w,materials:B,meshes:C,aabb:l,boundingSphere:g}}async function jA(A,e,t){const{gltf:s,buffers:i,externalImageBlobs:n}=await async function(A,e){const t=A.pathname.toLowerCase();let s,i;if(t.endsWith(".gltf")){s=await e.downloadJson(A.toString());const t=(s.buffers??[]).map((async t=>{const s=new URL(t.uri,A);return s.search||(s.search=A.search??""),e.downloadArrayBuffer(s.toString())}));i=await Promise.all(t)}else{if(!t.endsWith(".glb"))throw new Error(`Uknown GLTF file extention: "${A}"!`);{const t=await e.downloadArrayBuffer(A.toString()),{json:n,buffer:r}=mA(t);s=JSON.parse(n),i=[r]}}const n=s.images?.map((t=>{if(t.uri){const s=new URL(t.uri,A);return e.downloadBlob(s.toString())}}))??[];return{gltf:s,buffers:i,externalImageBlobs:await Promise.all(n)}}(A,e),{images:r,textures:o,materials:a,meshes:w,aabb:B,boundingSphere:I}=xA(i,s,n,(A=>t[A].contextData.vertexLayout)),C=r.map((A=>e.downloadImageFromBlob(A))),c=await Promise.all(C);return new LA(c,o,a,w,B,I,A)}class LA{images;textures;materials;meshes;aabb;boundingSphere;url;constructor(A,e,t,s,i,n,r){this.images=A,this.textures=e,this.materials=t,this.meshes=s,this.aabb=i,this.boundingSphere=n,this.url=r}createGeometry(A){return new uA(A,this.images,this.textures,this.materials,this.meshes,this.aabb,this.boundingSphere)}}class JA{materialTypes;assetUrl;assets=[];environments=[];downloader;constructor(A,e){this.materialTypes=A,this.assetUrl=e,this.downloader=new aA(e?new URL(e):void 0)}async newId(){const A=this.assets.length;return this.assets[A]=void 0,A}async loadAsset(A,e){const t=await jA(new URL(e),this.downloader,this.materialTypes);return this.assets[A]=t,t.boundingSphere}async disposeAsset(A){this.assets[A]=void 0}async loadEnvironment(A,e){const t=await async function(A,e,t){const s=[`${e}/background.ktx`,`${e}/irradiance.ktx`,`${e}/radiance.ktx`,new URL("./lut_ggx.ktx",e).toString()].map((async A=>await t.downloadArrayBuffer(A))),[i,n,r,o]=await Promise.all(s);return{id:A,background:i,irradiance:n,radiance:r,lut:o}}(A,e,this.downloader);this.environments[A]=t}async disposeEnvironment(A){this.environments[A]=void 0}}var SA,OA;function HA(A,e,t,s,i){const{offset:n}=e,r=D();return n&&E(r,n),e.meshes.map((e=>{const n="number"==typeof e.indices?e.indices:e.numVertices<65536?new Uint16Array(e.indices):new Uint32Array(e.indices);let o,a;switch(e.kind){case 0:case 1:case 4:case 5:case 3:case 10:case 11:o=4;break;case 7:o=1;break;case 2:case 6:case 8:case 9:o=0,a=A.tolerance;break;default:throw new Error("Unknown mesh type!")}let w=e.textures;if(w.length>1&&10===e.kind){let A=0;switch(t.deviceProfile.textureResolution){case.25:A=2;break;case.5:A=1}w=[e.textures[A]]}const B=t.createMesh(s[e.kind],i,o,e.vertices,n,w,r),I=void 0!==a?{tolerance:Math.pow(2,a)}:{};return i?B.update({visible:!0,uniforms:{...I,octantMask:255}}):B.update({visible:!1,uniforms:{...I}}),B}))}(SA||(SA={})).create=async function(A,e){return(await jA(new URL(e.url,A.downloader.baseUrl),A.downloader,A.renderContext.materialTypes)).createGeometry(A)};class KA{id;octantMask;data;sizeO;children=[];visibility=0;projectedSize=0;triangles=0;textureBytes=0;childrenTriangles;childrenTextureBytes;center=y();center4=P();corners=new Array(8);radius;meshes=[];abortController;state=0;size;subnodesMeshCounts=[];subnodesMeshOffsets=[];constructor(A,e,t,s){this.id=A,this.octantMask=e,this.data=t,this.sizeO=s;const{center:i,center4:n,corners:r}=this,o=t.originalBounds.box;z(i,t.originalBounds.sphere.center),this.radius=t.originalBounds.sphere.radius,W(n,i[0],i[1],i[2],1),t.childrenByteMask,this.size=s??Math.max(o.max[0]-o.min[0],Math.max(o.max[1]-o.min[1],o.max[2]-o.min[2]));const[a,w,B]=o.min,[I,C,c]=o.max;r[0]=R(a,w,B,1),r[1]=R(I,w,B,1),r[2]=R(a,C,B,1),r[3]=R(I,C,B,1),r[4]=R(a,w,c,1),r[5]=R(I,w,c,1),r[6]=R(a,C,c,1),r[7]=R(I,C,c,1),this.childrenTriangles=t.totalChildrenTriangles,this.childrenTextureBytes=t.totalChildrenTextureBytes}dispose(){const{children:A,abortController:e}=this;if(e)try{e.abort()}finally{}for(const A of this.meshes)A.delete();for(const e of A)e.dispose()}get path(){return`0${this.id}`}update(A,e,t,s,i=2){this.visibility=2==i?this.computeVisibility(e):i;const{center4:n,visibility:r,radius:o}=this;if(r<=1)this.projectedSize=0;else if("pinhole"==A){const A=Math.max(.001,X(t,n)-o);this.projectedSize=this.size*s[5]/(-A*s[11])}else this.projectedSize=this.size*s[5]}beginDownload(A){this.abortController=A,this.state=2}endDownload(A,e,t,s){const i=this.data;this.abortController=void 0,this.state=3;const{childrenByteMask:n}=this.data,{children:r,geometry:o}=bA(A,n,t,i.offset);this.children.length=0;for(let A=0;A<8;A++)if(n&1<<A){const e=r.shift(),t=this.createChild(A,e);this.children.push(t)}const a=HA(i,o,e,s,!1);switch(e.deviceProfile.name){case"ios":case"ipad":case"mac":break;default:this.subnodesMeshCounts=o.meshes.map((A=>A.subnodesCounts)),this.subnodesMeshOffsets=o.meshes.map((A=>A.subnodesOffsets))}this.meshes.length=0,this.meshes.push(...a),this.triangles=o.triangleCount,this.textureBytes=o.textureBytes}createChild(A,e){return new KA(this.id+A,1<<A,e,this.sizeO?.5*this.sizeO:void 0)}render(A){const{children:e,meshes:t,visibility:s,id:i}=this;let n=0;for(const A of e)0==A.children.length&&1!=A.visibility&&(n|=A.octantMask);const r=1!=s&&0!=n;for(let A=0;A<t.length;A++){const e=t[A];if(e.visible!==r||e.uniforms?.octantMask!=n){let t,s=r;if(r&&e.uniforms?.octantMask!=n&&this.subnodesMeshCounts[A]?.length){const e=[],i=[];let r=0;const o=this.subnodesMeshCounts[A],a=this.subnodesMeshOffsets[A];for(let A=0;A<o.length;A++){const t=o[A];t>0&&(n&1<<A?(i.push(a[A]),e.push(t)):r++)}r?i.length>0?t={offsets:i,counts:e}:s=!1:t={offsets:[],counts:[]}}e.update({visible:s,uniforms:{...e.uniforms,octantMask:n},drawElements:t})}}}computeVisibility(A){const{center4:e,radius:t,corners:s}=this;let i=!0,n=!1;for(const s of A){const A=X(s,e);if(A>t){n=!0,i=!1;break}A>-t&&(i=!1)}if(i===n){n=!0,i=!0;for(const e of s)for(const t of A)X(t,e)>0?i=!1:n=!1}let r=0;return r=n?1:i?3:2,r}get isLeaf(){return 0==this.data.childrenByteMask}shouldSplit(A){const{visibility:e,projectedSize:t}=this;return 1!=e&&t>A}split(){this.state=1}collapse(){const{children:A,meshes:e,abortController:t}=this;if(t){this.abortController=void 0;try{t.abort()}finally{}}for(const A of e)A.delete();for(const e of A)e.dispose();e.length=0,A.length=0,this.triangles=0,this.textureBytes=0,this.state=0}}class NA{id;children;visibility=0;state=0;projectedSize=0;triangles=0;textureBytes=0;childrenTriangles=0;childrenTextureBytes=0;childIds;center=y();center4=P();corners=new Array(8);radius;abortController;size;meshes;constructor(A){const{center:e,center4:t,corners:s}=this,{id:i,boundingSphere:n,aabb:r,childIds:o}=A;this.id=i,this.childIds=o,z(e,n.center),this.radius=n.radius,W(t,e[0],e[1],e[2],1),this.size=Math.max(r.max[0]-r.min[0],Math.max(r.max[1]-r.min[1],r.max[2]-r.min[2]));const[a,w,B]=r.min,[I,C,c]=r.max;s[0]=R(a,w,B,1),s[1]=R(I,w,B,1),s[2]=R(a,C,B,1),s[3]=R(I,C,B,1),s[4]=R(a,w,c,1),s[5]=R(I,w,c,1),s[6]=R(a,C,c,1),s[7]=R(I,C,c,1)}dispose(){const{children:A,meshes:e,abortController:t}=this;if(t){try{t.abort()}finally{}this.abortController=void 0}if(e){for(const A of e)A.delete();this.meshes=void 0}if(A){for(const e of A)e.dispose();this.children=void 0}this.state=0}get path(){return`_${this.id}.glb`}update(A,e,t,s,i=2){this.visibility=2==i?this.computeVisibility(e):i;const{center4:n,visibility:r,radius:o}=this;if(r<=1)this.projectedSize=0;else if("pinhole"==A){const A=Math.max(.001,X(t,n)-o);this.projectedSize=this.size*s[5]/(-A*s[11])}else this.projectedSize=this.size*s[5]}beginDownload(A){this.abortController=A,this.state=2}async endDownload(A,e,t){const{materialTypes:s}=A,{json:i,buffer:n}=mA(e),r=JSON.parse(i),o=r.nodes[0].extras.children,a=[n],{images:w,textures:B,materials:I,meshes:C,aabb:c,boundingSphere:g}=xA(a,r,[],(A=>s[A].contextData.vertexLayout)),l=w.map((A=>t.downloadImageFromBlob(A))),b=await Promise.all(l),h=new LA(b,B,I,C,c,g).createGeometry({renderContext:A});this.abortController=void 0,this.state=3,this.children=o.map((A=>this.createChild(A))),this.meshes=h.meshes}createChild(A){return new NA(A)}render(A){const{children:e,meshes:t,visibility:s}=this,i=e?.every((A=>3==A.state))??!1,n=1!=s&&!i;if(t)for(const A of t)A.visible!==n&&A.update({visible:n})}computeVisibility(A){const{center4:e,radius:t,corners:s}=this;let i=!0,n=!1;for(const s of A){const A=X(s,e);if(A>t){n=!0,i=!1;break}A>-t&&(i=!1)}if(i===n){n=!0,i=!0;for(const e of s)for(const t of A)X(t,e)>0?i=!1:n=!1}let r=0;return r=n?1:i?3:2,r}get isLeaf(){return 0==this.childIds.length}shouldSplit(A){const{visibility:e,projectedSize:t}=this;return 1!=e&&t>A}split(){this.state=1}collapse(){const{children:A}=this;if(A)for(const e of A)e.dispose()}}function kA(A){if(A){var e=atob(A),t=e.length,s=new Uint8ClampedArray(t);for(let A=0;A<t;A++)s[A]=e.charCodeAt(A);return s}}function GA(A,e,t,s){const i=A.length,n=new Uint8ClampedArray(4*i);let r=0;for(let o=0;o<i;o++)n[r++]=A[o],n[r++]=e[o],n[r++]=t[o],n[r++]=s[o];return n}function YA(A){const e=new Float32Array(5120);for(let A=0;A<256;A++)for(let t=0;t<5;t++)e[4*(256*t+A)+t]=1;if(A)for(let t=0;t<A.length;t++){const{rgbaTransform:s}=A[t];for(let A=0;A<5;A++)for(let i=0;i<4;i++)e[4*(256*A+t)+i]=s[A+5*i]}return e}class PA{scene;config;root;rootTerrain;meshes;objectHighlightPixels;objectHighlightImage;colorMatricesImage;elevationImageData;elevationImage;deviationImageData;deviationImage;intensityImageData;intensityImage;materials;prevSelectedObjects;prevHiddenObjects;prevElevationColors;prevDeviationColors;prevIntensityColors;prevHighlights=[];constructor(A,e,t,s,i){this.scene=A,this.config=e;const n=e.octreeSize?2*e.octreeSize:void 0,{renderContext:r}=A;this.root=new KA("",255,t,n),i&&(this.rootTerrain=new NA(i)),this.rootTerrain?.split();const o={},[a,w]=function(A){const e=Math.min(A,4096);return[e,Math.ceil(A/e)]}(e.numObjects);{const A={type:5121,internalFormat:6409,format:6409,width:a,height:w,generateMipmaps:!1,transferBuffer:!1};this.objectHighlightPixels=new Uint8Array(a*w),this.objectHighlightImage=r.createImageFromBuffer(this.objectHighlightPixels,A),o.object_info=r.createTexture(this.objectHighlightImage)}{const A={type:5126,internalFormat:34836,format:6408,width:256,height:5,generateMipmaps:!1,transferBuffer:!0};this.colorMatricesImage=r.createImageFromBuffer(YA(),A),o.color_matrix=r.createTexture(this.colorMatricesImage)}this.elevationImageData=new ImageData(1024,1),this.elevationImage=r.createImage(this.elevationImageData,{generateMipmaps:!1});const B=r.createTexture(this.elevationImage);o.elevation=B,this.deviationImageData=new ImageData(1024,1),this.deviationImage=r.createImage(this.deviationImageData,{generateMipmaps:!1});const I=r.createTexture(this.deviationImage);o.deviation=I,this.intensityImageData=new ImageData(1024,1),this.intensityImage=r.createImage(this.intensityImageData,{generateMipmaps:!1});const C=r.createTexture(this.intensityImage);if(o.intensity=C,e.materialProperties){const A=function(A,e){const t=A;function s(){return new Uint8ClampedArray(A)}function i(){const e=new Uint8ClampedArray(A);return e.fill(255),e}const n={red:kA(e.diffuse?.red)??i(),green:kA(e.diffuse?.green)??i(),blue:kA(e.diffuse?.blue)??i()},r=kA(e.opacity)??i(),o={red:kA(e.specular?.red)??s(),green:kA(e.specular?.green)??s(),blue:kA(e.specular?.blue)??s()},a=kA(e.shininess)??s(),w=GA(n.red,n.green,n.blue,r),B=GA(o.red,o.green,o.blue,a),I=new Uint8ClampedArray(2*t*4);return I.set(w,0*t*4),I.set(B,1*t*4),new ImageData(I,t,2)}(e.numMaterials,e.materialProperties);o.material_properties=r.createTexture(r.createImage(A,{generateMipmaps:!1,format:6408}))}else if(A.materials&&A.materials.length){const e=A.materials[0].textures;e&&(o.material_properties=e["diffuse+opacity"])}const c={numMaterials:e.numMaterials,objectInfoTextureSize:[a,w]},g=[r.createMaterial("octree",c,o),r.createMaterial("octree_a",c,o),r.createMaterial("pointcloud",c,o),r.createMaterial("octree_terrain",c,o),r.createMaterial("octree_ds",c,o),r.createMaterial("octree_ds_a",c,o),r.createMaterial("pointcloud_deviation",c,o),r.createMaterial("lines",c,o),r.createMaterial("pointcloud_intensity",c,o),r.createMaterial("pointcloud_deviation_intensity",c,o),r.createMaterial("octree_albedo",c,o),r.createMaterial("octree_document",c,o)];this.materials=g,this.meshes=HA(t,s,r,g,!0)}async getLeaves(){const{downloader:A}=this.scene,e=new Set;return dA(e,new Uint8Array(await A.downloadArrayBuffer("octree"))),e}dispose(){const{root:A}=this;A.dispose()}setObjectHighlights(A){const e=this.objectHighlightPixels,t=new Uint8Array(A),{numObjects:s}=this.config;for(let A=0;A<s;A++)e[A]=t[A]}setElevationColors(A){const e=this.elevationImageData.data,t=A.length,s=A[0].elevation,i=A[t-1].elevation;let n=0;const r=y();z(r,A[0].color);for(let o=0;o<1024;o++){const a=(o+.5)/1024*(i-s)+s;for(let e=n;e<t-1;e++){n=e;const{elevation:t,color:s}=A[e],{elevation:i,color:o}=A[e+1];if(a>=t&&a<i){H(r,s,o,(a-t)/(i-t));break}}const[w,B,I]=r;e[4*o+0]=255*w,e[4*o+1]=255*B,e[4*o+2]=255*I,e[4*o+3]=255}}setDeviationColors(A){const e=this.deviationImageData.data,t=A.length,s=A[0].deviation,i=A[t-1].deviation;let n=0;const r=P();V(r,A[0].color);for(let o=0;o<1024;o++){const a=(o+.5)/1024*(i-s)+s;for(let e=n;e<t-1;e++){n=e;const{deviation:t,color:s}=A[e],{deviation:i,color:o}=A[e+1];if(a>=t&&a<i){Z(r,s,o,(a-t)/(i-t));break}}const[w,B,I,C]=r;e[4*o+0]=255*w,e[4*o+1]=255*B,e[4*o+2]=255*I,e[4*o+3]=255*C}}setIntensityColors(A){const e=this.intensityImageData.data,t=A.length,s=A[0].intensity,i=A[t-1].intensity;let n=0;const r=P();V(r,A[0].color);for(let o=0;o<1024;o++){const a=(o+.5)/1024*(i-s)+s;for(let e=n;e<t-1;e++){n=e;const{intensity:t,color:s}=A[e],{intensity:i,color:o}=A[e+1];if(a>=t&&a<i){Z(r,s,o,(a-t)/(i-t));break}}const[w,B,I,C]=r;e[4*o+0]=255*w,e[4*o+1]=255*B,e[4*o+2]=255*I,e[4*o+3]=255*C}}update(A,e,t,s){const{root:i,rootTerrain:n,scene:r}=this,{downloader:o,renderContext:a}=r,{viewFrustum:w,viewClipMatrix:B,projection:I}=A,{left:C,right:c,top:g,bottom:l,near:b,far:h,image:d}=w,u=[C,c,g,l,b,h],{showBoundingBoxes:m,maxQueueSize:D}=t.diagnostics,{elevationColors:f}=t.terrain??{},{colors:Q}=t.points.deviation,{colors:E}=t.points.intensity,T=t.quality.detail.value*s.detailBias,v=t.quality.detail.maxLodTriangles??Number.MAX_SAFE_INTEGER,M=t.quality.detail.maxLodTextureBytes??Number.MAX_SAFE_INTEGER,{prevElevationColors:p,prevDeviationColors:y,prevIntensityColors:F}=this,{objectHighlights:U}=t;if(!oA(U,this.prevHighlights)){this.prevHighlights=U;const N=YA(U);this.colorMatricesImage.update(N)}if(e&&(this.setObjectHighlights(e),this.objectHighlightImage.update(this.objectHighlightPixels)),!oA(f,p)){this.prevElevationColors=f;let k=1,G=-1;f&&f.length>0&&(this.setElevationColors(f),this.elevationImage.update(this.elevationImageData),k=f[0].elevation,G=f[f.length-1].elevation),this.materials[3].updateUniforms({elevationRangeMin:k,elevationRangeMax:G})}if(!oA(Q,y)){this.prevDeviationColors=Q;let Y=1,P=-1;Q&&Q.length>0&&(this.setDeviationColors(Q),this.deviationImage.update(this.deviationImageData),Y=Q[0].deviation,P=Q[Q.length-1].deviation),this.materials[6].updateUniforms({deviationRangeMin:Y,deviationRangeMax:P}),this.materials[9].updateUniforms({deviationRangeMin:Y,deviationRangeMax:P})}if(!oA(E,F)){this.prevIntensityColors=E;let R=1,V=-1;E&&E.length>0&&(this.setIntensityColors(E),this.intensityImage.update(this.intensityImageData),R=E[0].intensity,V=E[E.length-1].intensity),this.materials[8].updateUniforms({intensityRangeMin:R,intensityRangeMax:V}),this.materials[9].updateUniforms({intensityRangeMin:R,intensityRangeMax:V})}const{subtrees:z}=this.config;function x(A,e=2){A.update(I,u,d,B,e),A instanceof KA&&1===A.id.length&&z&&z.length>1&&("points"===z[+A.id]?t.advanced.hidePoints&&(A.visibility=1):"lines"===z[+A.id]?t.advanced.hideLines&&(A.visibility=1):"terrain"===z[+A.id]?t.advanced.hideTerrain&&(A.visibility=1):"documents"===z[+A.id]?t.advanced.hideDocuments&&(A.visibility=1):t.advanced.hideTriangles&&(A.visibility=1));const{visibility:s,children:i}=A;if(i)for(const A of i)x(A,s)}x(i),n&&x(n);let j=0,L=0;function J(A){if(A.shouldSplit(T))if(A.children&&0!=A.children.length)for(const e of A.children)J(e);else!A.isLeaf&&0==A.state&&j+A.childrenTriangles<=v&&L+A.childrenTextureBytes<=M&&A.split();else A.shouldSplit(.98*T)||A.collapse()}!function A(e){if(j+=e.triangles,L+=e.textureBytes,e.children)for(const t of e.children)A(t)}(i),J(i),n&&J(n);const S=3!=i.state;for(const W of this.meshes)W.update({visible:S,uniforms:{...W.uniforms,octantMask:255}});function O(A){if(A.render(m),A.children)for(const e of A.children)O(e)}O(i),n&&O(n);let H=!1;{const X=[];function Z(A){1==A.state&&X.push(A);const{children:e}=A;if(e)for(const A of e)Z(A)}Z(i),n&&Z(n),H=X.length>0,X.sort(((A,e)=>e.projectedSize-A.projectedSize));for(const q of X){if(o.activeDownloads>=D)break;const _=new AbortController,$=o.downloadArrayBuffer(q.path,_);q.beginDownload(_),$.then((A=>{q instanceof KA?q.endDownload(this.config.version,a,A,this.materials):q.endDownload(a,A,o)}),(A=>{A.name}))}}const K=!H&&!a.hasChanges&&0===o.activeDownloads;return K&&this.scene.resolved(),K}}(OA||(OA={})).create=async function(A,e){const t=await A.downloader.downloadArrayBuffer("root"),{offset:s,terrain:i,version:n}=e,{children:r,geometry:o}=bA(n,1,t,s);return new PA(A,e,r[0],o,i)};const RA=new Uint8Array([171,75,84,88,32,49,49,187,13,10,26,10]);function*VA(A,e){const t=A.glFormat,s=A.glInternalFormat,i=A.glType,n=A.glBaseInternalFormat,r=Math.max(1,A.numberOfMipmapLevels),o=Math.max(1,A.numberOfArrayElements),a=A.numberOfFaces,w=Math.max(1,A.pixelDepth);let B=64+A.bytesOfKeyValueData;const I=6==a&&0==A.numberOfArrayElements?1:o*a*w;for(let C=0;C<r;C++){const r=A.pixelWidth>>C,c=A.pixelHeight>>C,g=new Int32Array(e,B,1)[0];B+=4;const l=g/I;for(let A=0;A<o;A++)for(let A=0;A<a;A++)for(let e=0;e<w;e++){const e=B;B+=l;const o={kind:"uncompressed",format:t,internalFormat:s,type:i,target:6==a?34069+A:3553,level:C,width:r,height:c,blobRange:[e,B],baseInternalFormat:n};yield o}}}function WA(A){const e=function(A){const e=new DataView(A,0,12);for(let A=0;A<RA.length;A++)if(e.getUint8(A)!=RA[A])throw new Error("texture missing KTX identifier");const t=Uint32Array.BYTES_PER_ELEMENT,s=new DataView(A,12,13*t),i=67305985===s.getUint32(0,!0);return{glType:s.getUint32(1*t,i),glTypeSize:s.getUint32(2*t,i),glFormat:s.getUint32(3*t,i),glInternalFormat:s.getUint32(4*t,i),glBaseInternalFormat:s.getUint32(5*t,i),pixelWidth:s.getUint32(6*t,i),pixelHeight:s.getUint32(7*t,i),pixelDepth:s.getUint32(8*t,i),numberOfArrayElements:s.getUint32(9*t,i),numberOfFaces:s.getUint32(10*t,i),numberOfMipmapLevels:s.getUint32(11*t,i),bytesOfKeyValueData:s.getUint32(12*t,i)}}(A);return{target:6==e.numberOfFaces?34067:3553,images:[...VA(e,A)]}}function XA(A){const e={};if(A)for(const t in A){const s=A[t]?.textureIndex;e[t]=s}return e}class ZA{commands=[];transferables=[];createTextures(A,e,t,s){this.commands.push({name:"createTextures",args:[A,e,t,s]}),this.transferables.push(t)}createImage(A,e,t){this.commands.push({name:"createImage",args:[A,e,t]}),"ImageBitmap"in self&&e instanceof ImageBitmap&&this.transferables.push(e)}createImageFromBuffer(A,e,t){this.commands.push({name:"createImageFromBuffer",args:[A,e,t]}),t.transferBuffer&&this.transferables.push(e)}createTexture(A,e,t){this.commands.push({name:"createTexture",args:[A,e,t]}),"ImageBitmap"in self&&e instanceof ImageBitmap&&this.transferables.push(e)}deleteTexture(A){this.commands.push({name:"deleteTexture",args:[A]})}createMaterial(A,e,t,s){this.commands.push({name:"createMaterial",args:[A,e,t,s]})}setSceneUniforms(A){this.commands.push({name:"setSceneUniforms",args:[A]})}setSceneTextures(A){this.commands.push({name:"setSceneTextures",args:[A]})}createMesh(A,e,t,s,i,n,r,o,a,w){this.commands.push({name:"createMesh",args:[A,e,t,s,i,n,r,o,a,w]}),this.transferables.push(r),o&&this.transferables.push(o)}updateMesh(A,e,t){this.commands.push({name:"updateMesh",args:[A,e,t]})}deleteMesh(A,e){this.commands.push({name:"deleteMesh",args:[A,e]})}updateMaterial(A,e,t){this.commands.push({name:"updateMaterial",args:[A,e,t]})}updateImage(A,e,t){this.commands.push({name:"updateImage",args:[A,e,t]})}commit(){const A=[...this.commands],e=[...this.transferables];return this.commands.length=0,this.transferables.length=0,{commands:A,transferables:e}}}class qA{view;extensions;deviceProfile;materialTypes;compressionType="none";images=new Set;textures=new Set;emptyTextureSlots=[];materials=new Set;meshes=new Set;_nextMeshId=1;_sceneUniforms={};_sceneTextures={};commands=new ZA;constructor(A,e,t,s){this.view=A,this.extensions=e,this.deviceProfile=t,this.materialTypes=s;const i=[];for(const A of i)if(e[`WEBGL_compressed_texture_${A}`]){this.compressionType=A;break}}get hasChanges(){return 0!=this.commands.commands.length}async loadEnvironmentTextures(A,e,t){const s=[`${A}/background.ktx`,`${A}/irradiance.ktx`,`${A}/radiance.ktx`,`${A}/../lut_ggx.ktx`].map((async A=>{const t=await e.downloadArrayBuffer(A),s=WA(t);return this.createTextures([s],t)[0]})),[i,n,r,o]=await Promise.all(s);return{background:i,irradiance:n,radiance:r,lut:o}}createEnvironmentTextures(A){const e=A=>{const e=WA(A);return this.createTextures([e],A)[0]};return{background:e(A.background),irradiance:e(A.irradiance),radiance:e(A.radiance),lut:e(A.lut)}}deleteTexture(A){this.commands.deleteTexture(A.textureIndex),this.textures.delete(A),this.emptyTextureSlots.push(A.textureIndex)}_nextTextureIndex=0;getTextureIndex(){return this.emptyTextureSlots.pop()??this._nextTextureIndex++}createTextures(A,e,t){let s=this._nextTextureIndex;return A.length>1?this._nextTextureIndex+=A.length:s=this.getTextureIndex(),this.commands.createTextures(s,A,e,t),A.map(((A,e)=>(A.target,new $A(this,s+e))))}createImage(A,e){const t=this.images.size;this.commands.createImage(t,A,e);const{width:s,height:i}=A,{generateMipmaps:n}=e??{};return new _A(this,t,"2d",{width:s,height:i,generateMipmaps:n})}createImageFromBuffer(A,e){const t=this.images.size;return this.commands.createImageFromBuffer(t,A.buffer,e),new _A(this,t,"2d",e)}createTexture(A,e){const t=this.getTextureIndex();return this.commands.createTexture(t,A.imageIndex,e),new $A(this,t,A,e)}createMaterial(A,e,t){const s=this.materials.size,i=this.materialTypes[A].contextData.vertexLayout,n=XA(t);return this.commands.createMaterial(s,A,e,n),new Ae(this,i,s,A,e??{},t??{})}createMesh(A,e,t,s,i,n,r){const o="number"==typeof i?void 0:2==i.BYTES_PER_ELEMENT?5123:5125,a="number"==typeof i?i:i.length,w="number"==typeof i?void 0:i.buffer,B=this._nextMeshId++,I=n?.map((A=>{const{data:e,semantic:t,transform:s}=A,i=WA(e);return{semantic:t,transform:s,texture:this.createTextures([i],e)[0]}}))??[];return this.commands.createMesh(A.materialIndex,B,e,t,a,o,s,w,I.map((A=>({textureIndex:A.texture.textureIndex,semantics:A.semantic,transform:A.transform}))),r),new ee(this,A.materialIndex,B,e,I,r)}get globalUniforms(){return this._sceneUniforms}set globalUniforms(A){this.commands.setSceneUniforms(A),this._sceneUniforms=A}get globalTextures(){return this._sceneTextures}set globalTextures(A){const e={};for(const t in A){const s=A[t]?.textureIndex;void 0!==s&&(e[t]=s)}this.commands.setSceneTextures(e),this._sceneTextures=A}async commit(){if(this.hasChanges){const{commands:A,transferables:e}=this.commands.commit();return await this.view.executeCommands(c(A,e)),!0}return!1}dispose(){const{commands:A,transferables:e}=this.commands;A.length=0,e.length=0}}class _A{context;imageIndex;kind;options;constructor(A,e,t="2d",s){this.context=A,this.imageIndex=e,this.kind=t,this.options=s,A.images.add(this)}update(A){this.context.commands.updateImage(this.imageIndex,A,this.options)}}class $A{context;textureIndex;image;options;constructor(A,e,t,s){this.context=A,this.textureIndex=e,this.image=t,this.options=s,A.textures.add(this)}}class Ae{context;vertexLayout;materialIndex;kind;uniforms;textures;constructor(A,e,t,s,i,n){this.context=A,this.vertexLayout=e,this.materialIndex=t,this.kind=s,this.uniforms=i,this.textures=n,A.materials.add(this)}updateUniforms(A){oA(this.uniforms,A)||(Object.assign(this.uniforms,A),this.context.commands.updateMaterial(this.materialIndex,A,void 0))}updateTextures(A){if(!oA(this.textures,A)){Object.assign(this.textures,A);const e=XA(A);this.context.commands.updateMaterial(this.materialIndex,void 0,e)}}}class ee{context;materialIndex;meshId;textures;initialModelWorldMatrix;uniforms;drawElements;_visible;get visible(){return this._visible}constructor(A,e,t,s,i,n){this.context=A,this.materialIndex=e,this.meshId=t,this.textures=i,this.initialModelWorldMatrix=n,this._visible=s,this.context.meshes.add(this)}update(A){const{visible:e,uniforms:t,drawElements:s}=A;let i=!1;if(void 0!==e&&this.visible!==e&&(this._visible=e,i=!0),"modelWorldMatrix"in A){const{initialModelWorldMatrix:e}=this;e&&(A={...A,modelWorldMatrix:A.modelWorldMatrix?f(D(),A.modelWorldMatrix,e):(n=e,r=new d(16),r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r)}),i=!0}var n,r;t&&!oA(this.uniforms,t)&&(this.uniforms=t,i=!0),s&&!oA(this.drawElements,s)&&(this.drawElements=s,i=!0),i&&this.context.commands.updateMesh(this.materialIndex,this.meshId,A)}delete(){for(const A of this.textures)this.context.deleteTexture(A.texture);this.context.commands.deleteMesh(this.materialIndex,this.meshId),this.context.meshes.delete(this)}}class te{scene;previousGeneration=0;constructor(A,e){this.scene=A}update(A,e,t,s){const{generation:i}=A;return this.previousGeneration!=i&&(this.previousGeneration=i,this.scene.resolved()),!0}async dispose(){}}var se;(se||(se={})).create=async function(A,e){return new te(A,e)};const ie={empty:se,cube:_,nodes:AA,gltf:SA,octree:OA};function ne(A,e){return A===e||!(!A||!e)&&A.assetId==e.assetId&&A.visible==e.visible&&k(A.position,e.position)&&k(A.scale,e.scale)&&function(A,e){return A[0]===e[0]&&A[1]===e[1]&&A[2]===e[2]&&A[3]===e[3]}(A.rotation,e.rotation)}class re{materialTypes;scriptUrl;assets;downloader=new aA;initialUniforms={};initialTextures={};resolvedCallbacks=[];core;generation=0;constructor(A,e,t){this.materialTypes=A,this.scriptUrl=e,this.assets=t}resolved(){for(const A of this.resolvedCallbacks)A();this.resolvedCallbacks.length=0}get fullyResolved(){return new Promise((A=>{this.resolvedCallbacks.push(A)}))}async initialize(A,e,t,s){this.core&&this.core.dispose();const i=a(A),n=new aA(s?new URL(s):void 0);await i.init();const r=function(A,e,t,s){return new qA(A,e,t,s)}(i,await i.extensions,e,this.materialTypes),o=function(A,e){const t=A.createMaterial("background"),s=new Float32Array([1,1,-1,1,1,-1,-1,-1]);return{id:void 0,background:t,mesh:A.createMesh(t,!1,5,s.buffer,4),downloader:e}}(r,new aA(new URL("/assets/env/",this.scriptUrl))),w=await async function(A,e,t,s){const i=new Array;if(A){const s=[];if(A.textures&&!("materialProperties"in A))for(const i of A.textures){let n;try{i&&-1!==i.indexOf(".")&&(n=await e.downloadImage(i))}catch(A){}if(!n)break;const r=t.createTexture(t.createImage(n,{generateMipmaps:!1}));s.push(r)}if(A.materials&&!("materialProperties"in A))for(const e of A.materials){const A={...e.uniforms},n=Array.isArray(e.textures)?{"diffuse+opacity":e.textures[0],"specular+shininess":e.textures[1]}:e.textures??{},r={};for(let A in n){const e=n[A];void 0!==e&&(r[A]=s[e])}const o=t.createMaterial(e.kind,A,r);i.push(o)}}return{resolved:s,downloader:e,renderContext:t,materials:i,initialUniforms:{},initialTextures:{}}}(t,n,r,(()=>{this.resolved()}));let B,I;if(t){const A=ie[t.kind];if(!A)throw new Error(`Unknown scene configuration kind: '${t.kind}'!`);B=await A.create(w,t),I=B.boundingSphere}const C=function(A){const e=new Float32Array([0,0,0,0,0,1,0,0,0,0,1,0,0,1,1,0,1,0,0,3,1,0,1,3,1,1,0,3,1,1,1,3,0,0,0,1,0,0,1,1,1,0,0,1,1,0,1,1,0,1,0,4,1,1,0,4,0,1,1,4,1,1,1,4,0,0,0,2,1,0,0,2,0,1,0,2,1,1,0,2,0,0,1,5,0,1,1,5,1,0,1,5,1,1,1,5]),t=new Uint16Array([0,1,2,2,1,3,4,5,6,6,5,7,8,9,10,10,9,11,12,13,14,14,13,15,16,17,18,18,17,19,20,21,22,22,21,23]),s=A.createMaterial("clipping_box");return A.createMesh(s,!1,4,e.buffer,t)}(r),c=function(A){const e={color:R(43/255,46/255,52/255,.5)},t=A.createMaterial("watermark",e),s=function(A){var e=atob("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VwCNAKUAVgBXAKUAigCtAF0AigBdAHsAYABWAKUAfABgAKUAigB7AH0AigB9AHUAfAClAIoAngB8AIoAigB1AGMAigBjAGQAnQCeAIoAnACdAIoAigBkAJsAmwCcAIoAuAC2ALcAtwC5ALoAvAC4ALcAtwC6ALsAtwC7ALwASABHAFUAMwAyAEoASABVADMAVABIADMAMwBKAEkASQBLAFMAUwBOAE0ATQBMAE8ATwBQAFIAUgBRAEIAQgA4ADcANwA2ADUANQA0ADoAOgA5ACYAJgAlAC4ALgAvACgALgAoACcANQA6ACYAJgAuACcAJgAnAC0ANwA1ACYAUgBCADcATQBPAFIASQBTAE0AVAAzAEkARgBUAEkASQBNAFIAJgAtAEEAJgBBAEAASQBSADcARQBGAEkAQwBFAEkAJgBAADEAJgAxADAAQwBJADcARABDADcAJgAwACQAJgAkACMAKwBEADcALAArADcAJgAjADwANwAmADwAKQAsADcAKgApADcANwA8ADsANwA7AD8APQAqADcANwA/AD4APgA9ADcAPgF9AXwBPgF8AZIBHgQ6BDAAHgQwADEANgQ3BDYANgQ2ADcAKgA/BEAEKgBABCkANAQ1BCgANAQoAC8AMQQcBC0AMQQtACcAHQQ0BC8AHQQvAC4AMwQdBC4AMwQuACUAIwQ9BDsAIwQ7ADwANwQhBDUANwQ1ADYAMwAfBEYEMwBGBDIANQAhBDgENQA4BDQAPQAlBD8EPQA/BCoAOAAgBDYEOAA2BDcAOgAiBDkAJAQlBD0AJAQ9AD4APQQ+BD8APQQ/ADsAPgQkBD4APgQ+AD8ARABCBEMERABDBEMAQgBMBCAEQgAgBDgAQARBBCwAQAQsACkAMgQ5BEAAMgRAAEEASQRKBEwASQRMAE0ANAA4BCIENAAiBDoAQwQnBEUAQwRFAEMAJgRCBEQAJgREACsARQAnBEQERQBEBEYAPAQjBDwAPAQ8ACMAHAQyBEEAHARBAC0AOQQeBDEAOQQxAEAASgArBEcESgBHBEkAKQQqBEcAKQRHAEgAKAQpBEgAKARIAFQASwQvBFIASwRSAFAARwQsBEsARwRLAEkASgQuBE8ASgRPAEwASARJBE0ASARNAE4AQQQmBCsAQQQrACwATwAuBEsETwBLBFAAMARMBEIAMARCAFEAIgQzBCUAIgQlACYALQRIBE4ALQROAFMARAQoBFQARARUAEYAIgQmADkASwAsBC0ESwAtBFMAKgRFBFUAKgRVAEcAOgQ7BCQAOgQkADAANQQxBCcANQQnACgAVQBFBB8EVQAfBDMAMgBGBCsEMgArBEoAVgDVBNYEVgDWBFcAYQDoAw4EYQAOBGIAkgF8AXsBewFTAUUBRQFEAXUBdQF0AZABkAGPAUkBSQFIAYIBggFHAUYBRgE0AZEBRgGRAWoBSQGCAUYBdQGQAUkBewFFAXUBQQGSAXsBQgFBAXsBewF1AUkBSQFGAWoBSQFqAUsBQgF7AUkBUgFCAUkBSQFLAUoBSQFKAUwBUAFSAUkBSQFMAU0BSQFNAVABNAFGAY4BjgF/AXcBdwF2AY0BjQGBAYABgAFAAT8BPwF4AYwBjAE+AXoBjAF6AXkBgAE/AYwBdwGNAYABNAGOAXcBNQE0AXcBdwGAAYwBjAF5AVcBjAFXAVYBawE1AXcBTgFrAXcBdwGMAVYBdwFWAVUBTwFOAXcBUQFPAXcBdwFVAVQBdwFUAVEBPgGMAX4BfgE3ATYBNgF9AT4BfgE2AT4BWAF9ATYBNgGLAYoBigGJAW0BbQFlAWQBZAFoAYQBhAGDAYgBiAGHAYYBhgGFAWkBaQFnAWYBZgFvAW4BbgFsAWMBYwFZAUMBYwFDATkBZgFuAWMBhgFpAWYBhAGIAYYBbQFkAYQBNgGKAW0BWgFYATYBOgFaATYBNgFtAYQBhAGGAWYBZgFjATkBZgE5ATgBOgE2AYQBOwE6AYQBZgE4AT0BZgE9ATwBWwE7AYQBXAFbAYQBhAFmATwBhAE8AV0BXgFcAYQBYAFeAYQBhAFdAV8BhAFfAXABYQFgAYQBYgFhAYQBhAFwAXMBhAFzAXIBcQFiAYQBcgFxAYQBzwDRAMsAywDKAMkAyQDIAM0AzQDMAM4AwAC/AMQAzQDOAMAAywDJAM0A0ADPAMsAvQDQAMsAywDNAMAAwADEAMUAxQDCAMEAxQDBAMMAvgC9AMsAxgC+AMsAwADFAMMAwADDANMAxgDLAMAAxwDGAMAAwADTANIAwADSAMcAWgDfBMkEWgDJBFsADgTnA2sADgRrAGIAXAC9BNAEXADQBF0AXgDPBL0EXgC9BFwAXwC8BM8EXwDPBF4AYADUBNUEYADVBFYAYwC/BNMEYwDTBGQACwTrA3oACwR6AHkAZQDZBNsEZQDbBGYAbgDeBMgEbgDIBG8AEwTsA1gAEwRYAGoAEQQSBG0AEQRtAGwAEgTxA3YAEgR2AG0ACgQRBGwACgRsAHQAcADMBM0EcADNBHEAcQDNBM4EcQDOBHIAcwC6BMwEcwDMBHAAdQDSBL8EdQC/BGMAAwQMBIoAAwSKAIkAdwDLBN0EdwDdBHgA9wMLBHkA9wN5AKMAXQDQBNEEXQDRBHsADQTvA4EADQSBAIAAfADEBNQEfADUBGAAewDRBL4EewC+BH0AfQC+BNIEfQDSBHUAfgDwA+UDfgDlA38AggDYBMcEggDHBIMAegDrA/0DegD9A4cAhgDGBNgEhgDYBIIALwQwBFEALwRRAFIAVwDWBMUEVwDFBI0AmAAEBA8EmAAPBJkACATmA4UACASFAIQAEAT7A4wAEASMAIsAFAT5A4gAFASIAFkA/gP/A6QA/gOkAGgAjgDgBLEEjgCxBI8AjwCxBLIEjwCyBJAAkACyBLMEkACzBJEAkQCzBLQEkQC0BJIAkgC0BLUEkgC1BJMAkwC1BLYEkwC2BJQAlAC2BLcElAC3BJUAlQC3BLgElQC4BJYAlgC4BLkElgC5BJcAlwC5BLoElwC6BHMAmgC7BLwEmgC8BF8AoADtA/oDoAD6A2kAmwDABMEEmwDBBJwAnADBBMIEnADCBJ0AnQDCBMMEnQDDBJ4AngDDBMQEngDEBHwAWwDJBMoEWwDKBJ8AnwDKBMsEnwDLBHcApQD2A/UDpQD1A6YA+wP4A6EA+wOhAIwAoQD4A/wDoQD8A6IA/wP2A6UA/wOlAKQA+QMQBIsA+QOLAIgAAAQBBKgAAASoAKcApgD1AwAEpgAABKcAZgDbBOAEZgDgBI4A9AMCBKoA9AOqAKkADwQFBLEADwSxAJkAqgACBAMEqgADBIkA5wMGBK0A5wOtAGsAeADdBNwEeADcBKsAgwDHBNoEgwDaBKwAqwDcBNkEqwDZBGUA5gMJBK4A5gOuAIUArADaBN4ErADeBG4AfwDlAw0EfwANBIAAsADyAwoEsAAKBHQA7AMUBFkA7ANZAFgArgAJBPIDrgDyA7AA+gMTBGoA+gNqAGkAbwDIBN8EbwDfBFoADAQEBJgADASYAIoArQAGBAcErQAHBLMABQTzA7IABQSyALEAswAHBAgEswAIBIQAjQDFBNcEjQDXBLQA/AP3A6MA/AOjAKIAtQDuA+0DtQDtA6AAtADXBMYEtADGBIYAsgDzA+gDsgDoA2EA/QPqA2cA/QNnAIcA8QPwA34A8QN+AHYAZADTBMAEZADABJsA6gP+A2gA6gNoAGcAcgDOBLsEcgC7BJoAgQDvA+4DgQDuA7UAAQTpA68AAQSvAKgABQUGBdUABQXVANQAFQQbBLcAFQS3ALYAFgQVBLYAFgS2ALgAGAQXBLoAGAS6ALkAGgQZBLwAGgS8ALsAFwQaBLsAFwS7ALoAvAAZBBYEvAAWBLgAGwQYBLkAGwS5ALcAwQAiAA0AwQANAMMAXANdA6ABXAOgAaEBvwAOAA8AvwAPAMQAvgAYAB0AvgAdAL0A0wAhABcA0wAXANIA7gDvAAMBAwEsAS4BLgHyAOoA6gDrAPQA9AD8AP0A/QD+AP8A/wAzAR4BHgHnAOgA6ADWANcA1wAGAQkBCQEKAR8BHwEgASEBIQH3APgA+AABASoB+AAqAewAHwEhAfgA1wAJAR8BHgHoANcA/QD/AB4B6gD0AP0AAwEuAeoA8QDuAAMBFQHxAAMBAwHqAP0A/QAeAdcA1wAfAfgA+ADsAO0A+ADtANgAFQEDAf0AFAEVAf0A1wD4ANgA1wDYANkAEwEUAf0AEgETAf0A1wDZAB0B1wAdAfUAEQESAf0AEAERAf0A1wD1APYA1wD2ACkBDwEQAf0ADgEPAf0A1wApAeMA1wDjAOQADgH9ANcADQEOAdcA1wDkAAwB1wAMAQ0BzAAMAM4ADADAAM4AwgARACIAwgAiAMEAxQAQABEAxQARAMIAwAAMAA4AwAAOAL8AxwASAB4AxwAeAMYAyQAVAB8AyQAfAMgAygAUABUAygAVAMkAywAgABQAywAUAMoANwGnA64DNwGuAzYBzQAWAAwAzQAMAMwA0AAZABoA0AAaAM8A0QAbABwAvQAdABkAvQAZANAA0gAXABIA0gASAMcAwwANACEAwwAhANMAcAN1A3IBcANyAXMB5wDKA+MD5wDjA+gAyAAfABYAyAAWAM0AzwAaABsAzwAbANEAcQOJA2EBcQNhAWIBAgEDAe8AAgHvAPAAKwExAQIB4ADpACsBMAHfAOAAFwEvATABCAEWARcBKAEHAQgBLQEnASgBJQEmAS0BIwEkASUB5gAiASMBBQHlAOYAAQH4AAUBAAEBAQUBBQHmACMBIwElAS0BLQEoAQgBCAEXATABMAHgACsBKwECAfAAKwHwABgBCAEwASsBIwEtAQgBAAEFASMBBAEAASMBKwEYAd0AKwHdANwAMgEEASMBCwEyASMBKwHcANoAKwHaANsA1QALASMB1ADVACMBCAErAdsACAHbAPkA3gDUACMB+gDeACMBCAH5APsACAH7APMA+gAjAQgBHAH6AAgBCAHzAOEACAHhAOIAGwEcAQgBGgEbAQgBCAHiABkBGQEaAQgBBAUFBdQABAXUAN4A/QC1A90D/QDdA/4AAQH3BAoFAQEKBSoBDwX5BNkADwXZANgA6wTsBN0A6wTdABgBBwX2BAQBBwUEATIB7wQDBeIA7wTiAOEA6wDiA8ED6wDBA/QACQULBeQACQXkAOMADgX4BO0ADgXtAOwAAwG2A9kDAwHZAywB6gDhA+ID6gDiA+sA3wC4A94D3wDeA+AA2gPhA+oA2gPqAPIA/AT9BO8A/ATvAO4A/QT+BPAA/QTwAO8A6gT8BO4A6gTuAPEABgX1BAsBBgULAdUA+wDuBAIF+wACBfMA/wTtBNoA/wTaANwA+QABBe4E+QDuBPsA2gDtBAAF2gAABdsA4ADeA7cD4AC3A+kABAH2BAgFBAEIBQAB4gTjBA8B4gQPAQ4BIQHHA9sDIQHbA/cABwHTA9wDBwHcAwgBLQG5A8QDLQHEAycBIAUfBTQBIAU0ATUBoAIBAFMEUwRSBAAAUwQAAKAC/gDdA78D/gC/A/8ACwUQBQwBCwUMAeQAAgHYA7YDAgG2AwMB+AC7A80D+ADNAwUBCQHgA8sDCQHLAwoB1wDkA8kD1wDJAwYBFgHUA98DFgHfAxcB4QTiBA4B4QQOAQ0BCAX3BAEBCAUBAQAB5ATlBBEB5AQRARAB8wACBe8E8wDvBOEADAEQBeEEDAHhBA0B5QTmBBIB5QQSAREB5gTnBBMB5gQTARIB5wToBBQB5wQUARMB6ATpBBUB6AQVARQB6QTqBPEA6QTxABUBDQUMBSkBDQUpAfYAGgHxBPIEGgHyBBsBAAUBBfkAAAX5ANsADwHjBOQEDwHkBBAB5gDOA88D5gDPAyIB8ATxBBoB8AQaARkBGwHyBPMEGwHzBBwB8wT0BPoA8wT6ABwB2QD5BPoE2QD6BB0BBgHJA+ADBgHgAwkBHgG9A8oDHgHKA+cACgHLA8gDCgHIAx8BHwHIA8wDHwHMAyABJQHQA9EDJQHRAyYBIAHMA8cDIAHHAyEBtwFDA7YBIgHPA8YDIgHGAyMBKAHSA9MDKAHTAwcBJAHFA9ADJAHQAyUBCAHcA9QDCAHUAxYB9QD7BA0F9QANBfYADAUJBeMADAXjACkB3QDsBP8E3QD/BNwA5QC6A84D5QDOA+YACgUOBewACgXsACoB6ADjA7wD6AC8A9YA9wDbA7sD9wC7A/gA1gC8A+QD1gDkA9cA+AQPBdgA+ATYAO0AMAHDA7gDMAG4A98ALwHVA8MDLwHDAzABLAHZA8IDLAHCAy4B9QQHBTIB9QQyAQsBKwHWA9cDKwHXAzEBJwHEA9IDJwHSAygBMQHXA9gDMQHYAwIBLgHCA9oDLgHaA/IAAwXwBBkBAwUZAeIA/wC/A74D/wC+AzMB+gT7BPUA+gT1AB0BBQHNA7oDBQG6A+UAFwHfA9UDFwHVAy8BMwG+A70DMwG9Ax4B6QC3A9YD6QDWAysB/gTrBBgB/gQYAfAA+gD0BAQF+gAEBd4AJgHRA7kDJgG5Ay0BIwHGA8UDIwHFAyQB9ADBA8AD9ADAA/wAPQGLA6oDPQGqAzwBOQF3A4wDOQGMAzgBOwF0A6MDOwGjAzoBcwN0AzsBcwM7AVsBfQOVA2gBfQNoAWQBQgEYBUEBbgN3AzkBbgM5AUMBRQGkA6EDRQGhA0QBSwEeBR0FSwEdBUoBtANYAVoBpgOCA0YBpgNGAUcBSgEdBRwFSgEcBUwBTAEcBRsFTAEbBU0BTwESBREFTwERBU4BTQEbBRoFTQEaBVABUQETBRIFUQESBU8BUAEaBRkFUAEZBVIBhQOkA0UBhQNFAVMBUgEZBRgFUgEYBUIBVAEUBRMFVAETBVEBFQUUBVQBFQVUAVUBFgUVBVUBFgVVAVYBFwUWBVYBFwVWAVcBPAGqA6sDPAGrA10BsAOvA4wBsAOMAXgBywATACAAhwNzA1sBhwNbAVwBXQGrA3YDXQF2A18BxgAeABgAxgAYAL4AagEiBR4FagEeBUsBmgN/Az8BmgM/AUABYAFyA4gDYAGIA14BiQNyA2ABiQNgAWEBegN5A2MB0QAcABMA0QATAMsAZQF+A30DZQF9A2QBqAOPA2YBqANmAWcBaQGQA6gDaQGoA2cBjQN6A2MBjQNjAWwBZgGPA3sDZgF7A28BTgERBSEFTgEhBWsBbQGWA34DbQF+A2UBewOOA24BewNuAW8BegEkBXkBdgNvA3ABdgNwAV8BcQGKA3EDcQFxA2IBdQOKA3EBdQNxAXIBgQOyA3YBgQN2AXcBhAOgA3QBhAN0AXUBqQNuA0MBqQNDAVkBfwOwA3gBfwN4AT8BtAOGA3wBtAN8AX0BsQOAA4ABsQOAAYEBfAGGA6IDfAGiA3sBJAUXBVcBJAVXAXkBmQOnAzcBmQM3AX4BewGiA4UDewGFA1MBRAGhA4QDRAGEA3UBnAOBA3cBnAN3AX8BawEhBSAFawEgBTUBfAOUA4MBfAODAYQBnQOmA0cBnQNHAYIBcAFvA3ADcAFwA3MBpQOdA4IBpQOCAUgBrAORA4UBrAOFAYYBowO0A1oBowNaAToBjgONA2wBjgNsAW4BjAOLAz0BjAM9ATgBkQOQA2kBkQNpAYUBmAOXA4oBmAOKAYsBiAGTA5IDiAGSA4cBkgOsA4YBkgOGAYcBlwOtA4kBlwOJAYoBlAOTA4gBlAOIAYMBrQOWA20BrQNtAYkBdAGgA58DdAGfA5ABrgOYA4sBrgOLATYBnwOeA48BnwOPAZABrwOZA34BrwN+AYwBmwOxA4EBmwOBAY0BgwOlA0gBgwNIAUkBsgObA40BsgONAXYBswOcA38BswN/AY4BggOzA44BggOOAUYBgAOaA0ABgANAAYABYwF5A3gDYwF4A1kBkQEjBSIFkQEiBWoBNAEfBSMFNAEjBZEBPgEkBXoBlQN8A4QBlQOEAWgBngODA0kBngNJAY8BtAN9AVgBeAOpA1kBQQEYBZIBkgEYBSQFkgEkBT4BxAAPABAAxAAQAMUA6QP0A6kA6QOpAK8AxQHEAdIBsAGvAccBxQHSAbAB0QHFAbABsAHHAcYBxgHIAdAB0AHLAcoBygHJAcwBzAHNAc8BzwHOAb8BvwG1AbQBtAGzAbIBsgGxAbcBtwG2AaMBowGiAasBqwGsAaUBqwGlAaQBsgG3AaMBowGrAaQBowGkAaoBtAGyAaMBzwG/AbQBygHMAc8BxgHQAcoB0QGwAcYBwwHRAcYBxgHKAc8BowGqAb4BowG+Ab0BxgHPAbQBwgHDAcYBwAHCAcYBowG9Aa4BowGuAa0BwAHGAbQBwQHAAbQBowGtAaEBowGhAaABqAHBAbQBqQGoAbQBowGgAbkBtAGjAbkBpgGpAbQBpwGmAbQBtAG5AbgBtAG4AbwBugGnAbQBtAG8AbsBuwG6AbQBQwNUA6IBQwOiAaMBVgNSA6QBVgOkAaUBpwFgA2EDpwFhA6YBVQNWA6UBVQOlAawBUgM9A6oBUgOqAaQBPgNVA6wBPgOsAasBPwNbA60BPwOtAa4BtAFXA1gDtAFYA7MBsAFAA2cDsAFnA68BsgFCA1kDsgFZA7EBswFYA0IDswFCA7IBtQFBA1cDtQFXA7QBuQFEA14DuQFeA7gBuwFFA0YDuwFGA7oBuAFeA18DuAFfA7wBugFGA2ADugFgA6cBSgNLA8QBSgPEAcUBvwFtA0EDvwFBA7UBpgFhA2IDpgFiA6kBUwNaA70BUwO9Ab4BwQFjA2QDwQFkA8ABwAFkA0gDwAFIA8IBygFqA2sDygFrA8kBqAFHA2MDqAFjA8EBwgFIA2UDwgFlA8MBvAFfA0UDvAFFA7sBXQNEA7kBXQO5AaABWgM/A64BWgOuAb0BsQFZA0MDsQFDA7cBPQNTA74BPQO+AaoBzwFQA1EDzwFRA84BxwFMA2gDxwFoA8YBxgFoA00DxgFNA8gByQFrA08DyQFPA8wBywFpA2oDywFqA8oBWwNcA6EBWwOhAa0BzAFPA2wDzAFsA80BzQFsA1ADzQFQA88BSQNKA8UBSQPFAdEBzgFRA20DzgFtA78B0AFOA2kD0AFpA8sBZQNJA9EBZQPRAcMBSwNmA9IBSwPSAcQByAFNA04DyAFOA9ABtgFDA6MB0gFmA0AD0gFAA7ABqQFiA0cDqQFHA6gBrwFnA0wDrwFMA8cBOAJdBV4FOAJeBTcCOwQ8BCMAOwQjACQA4AEgAh8C4AEfAjYCNgIfAh4CHgL1AecB5wHmARgCGAIXAjQCNAIzAusB6wHqASYCJgLpAegB6AHWATUC6AE1Ag0C6wEmAugBGAI0AusBHgLnARgC4wE2Ah4C5AHjAR4CHgIYAusB6wHoAQ0C6wENAu0B5AEeAusB9AHkAesB6wHtAewB6wHsAe4B8gH0AesB6wHuAe8B6wHvAfIB1gHoATICMgIjAhoCGgIZAjECMQIlAiQCJALiAeEB4QEbAjACMALgAR0CMAIdAhwCJALhATACGgIxAiQC1gEyAhoC1wHWARoCGgIkAjACMAIcAvkBMAL5AfgBDgLXARoC8AEOAhoCGgIwAvgBGgL4AfcB8QHwARoC8wHxARoCGgL3AfYBGgL2AfMB4AEwAiECIQLZAdgB2AEgAuABIQLYAeAB+gEiAiACIALYAS8CLwIuAi0CLQIQAggCCAIHAgsCCwIoAicCJwIsAisCKwIqAikCKQIMAgoCCgIJAhICEgIRAg8CDwIGAvwB/AHlAdsBDwL8AdsBCgISAg8CKwIpAgoCCwInAisCLQIIAgsCIAIvAi0C+gEgAi0CLQILAisCKwIKAg8CDwLbAdoBDwLaAd8B+wH6AS0C/QH7AS0CKwIPAt8BKwLfAd4B3AH9AS0C3QHcAS0CKwLeAQACKwIAAgIC/gHdAS0C/wH+AS0CKwICAhMCKwITAhYC/wEtAisCAQL/ASsCKwIWAhUCKwIVAhQCAwIBAisCBAIDAisCKwIUAgUCBQIEAisC2wHYAu0C2wHtAtoB4gH7AuAC4gHgAuEB5gIFA+cB5gLnAfUB3QHVAgQD3QEEA9wBAQLpAugCAQLoAv8BNQI2BTUFNQI1BQ0C8wEnBSYF8wEmBfEB3wHsAgsD3wELA94BzwLYAtsBzwLbAeUB5wEFAwID5wECA+YB6QEHA+MC6QHjAugB7gEvBS4F7gEuBe8B5AE3BeMB4AE4BR0C8AElBTQF8AE0BQ4CKAUnBfMBKAXzAfYB8gEtBSwF8gEsBfQB9AEsBTcF9AE3BeQB+wH9ARUDKgUpBfcBKgX3AfgBKQUoBfYBKQX2AfcBDQI1BTEFDQIxBe0BKwUqBfgBKwX4AfkBDgI0BTMFDgIzBdcBIAIiAhUD/wHoAtQC/wHUAv4B3gELAwwD3gEMAwACAAIMA9cCAALXAgIC/AEKA88C/AHPAuUBBgLbAtoCAwLTAukCAwLpAgECBALqAtMCBALTAgMCBQLSAuoCBQLqAgQCCgIJA/ACCgLwAgkCCALfAt4CCALeAgcCBwLeAvYCBwL2AgsCDALxAgkDDAIJAwoCDwLuAtsCDwLbAgYCAgLXAtACAgLQAhMCOAUrBfkBOAX5ARwC7AEwBS8F7AEvBe4BEAL3At8CEALfAggCEgLcAu8CEgLvAhECCQLwAtwCCQLcAhICFQLWAusCFQLrAhQCFALrAtICFALSAgUCFgLRAtYCFgLWAhUCGgLiAhMDGgITAxkCGALlAgEDGAIBAxcC5wIDAx4C5wIeAh8C4QHgAhED4QERAxsCEwLQAtECEwLRAhYCIQL6AggDIQIIA9kBMQUwBewBMQXsAe0BIAIVA+cCIALnAh8CIgL6ARUD/ADAA7UD/AC1A/0AJQISA+ECJQLhAiQCAwPmAvUBAwP1AR4CIwL9AuICIwLiAhoC5gECA+UC5gHlAhgCJgL+AgcDJgIHA+kBKALdAvUCKAL1AicC6gEGA/4C6gH+AiYCKgINA/ICKgLyAikC3AEEAxUD3AEVA/0B2gHtAuwC2gHsAt8BGwIRAxADGwIQAzACEQLvAu4CEQLuAg8CKQLyAvECKQLxAgwCLAL0AvMCLALzAisCKwLzAg0DKwINAyoCLQIOA/cCLQL3AhACJwL1AvQCJwL0AiwCLwL5AvgCLwL4Ai4CLgL4Ag4DLgIOAy0C2AEPA/kC2AH5Ai8CNAIAA/8CNAL/AjMCMAIQA/oCMAL6AiECMQL8AhIDMQISAyUC6wHkAgYD6wEGA+oBGQITA/wCGQL8AjECMgIUA/0CMgL9AiMC6AHjAhQD6AEUAzICFwIBAwADFwIAAzQCJALhAvsCJAL7AuIBOAUcAh0C1gEyBTYF1gE2BTUC4wE3BTYCCwL2At0CCwLdAigCMwL/AuQCMwLkAusBBgLaAtkCBgLZAvwB/AHZAgoDLgUtBfIBLgXyAe8BNgI3BTgFNgI4BeAB8QEmBSUF8QElBfAB/gHUAtUC/gHVAt0BCQAHAJQBlAGVAZYBlgGXAQsACwCTAQoAnwHTAZsBCwAKAJ8BlAGWAQsACAAJAJQB1QEIAJQBlAELAJ8BnwGbAZoBmgGdAZ4BmgGeAZwB1AHVAZQBmQHUAZQBnwGaAZwBnwGcAQUAmQGUAZ8BmAGZAZ8BnwEFAAYAnwEGAJgBnQHJArgCnQG4Ap4B1AHCAr0C1AG9AtUBngG4As0CngHNApwBmAHIArwCmAG8ApkBnwHOAswCnwHMAtMBmwHLAsoCmwHKApoB0wHMAssC0wHLApsBlgHFArsClgG7ApcBlAHHAroCmgHKAskCmgHJAp0BlAG6AsYClAHGApUBBwC/Ar4ClQHGAsUClQHFApYBCwDEAs4CCwDOApMBzgKfAQoABQC5AsMCBQDDAgYACADBAsACCADAAgkA1QG9AsEC1QHBAggAlwG7AsQClwHEAgsACQDAAr8CCQC/AgcAnAHNArkCnAG5AgUABwC+AscCBwDHApQBmQG8AsICmQHCAtQBBgDDAsgCBgDIApgBiQKKAosCiQKLAowCjgKNAogCjgKIAo8CVAM+A6sBVAOrAaIBUwJaAoICUwKCAksCeQJUAlMCdwJ4AnkCYQJiAncCOQJeAmECSAI6AjkCdgJJAkgCWAKGAnYCgwJZAlgCbQKKAoMCawJtAoMCgwJYAnYCdgJIAjkCOQJhAncCdwJ5AlMCUwJLAkoCUwJKAjwCOQJ3AlMCgwJ2AjkCagJrAoMCaQJqAoMCOQJTAjwCOQI8AjsCaAJpAoMCZwJoAoMCOQI7AnUCOQJ1AlICZgJnAoMCZAJmAoMCOQJSAlECOQJRAoECZAKDAjkCZQJkAjkCOQKBAkUCRAJlAjkCRQJEAjkCOgI0AzUDOgI1AzkCPAJnBVEFPAJRBTsCPgJFBVgFPgJYBT0CPwJXBUUFPwJFBT4CQAJEBVcFQAJXBT8CQQJcBV0FQQJdBTgCQwJHBVsFQwJbBUICRQJhBWMFRQJjBUQCRwIxAx0DRwIdA0YCSQIWAzMDSQIzA0gCSwJmBVAFSwJQBUoCTQJUBVUFTQJVBUwCTAJVBVYFTAJWBU4CTwJCBVQFTwJUBU0CUAJaBUcFUAJHBUMCUgJTBWUFUgJlBVECVAIqAzADVAIwA1MCPQJYBVkFPQJZBVUCVgJMBVwFVgJcBUECVQJZBUYFVQJGBVcCVwJGBVoFVwJaBVACWQItAycDWQInA1gCWwJgBU8FWwJPBVoCXAJOBWAFXAJgBVsCUwIwAxwDUwIcA10COQI1AxcDOQIXA14CYAIlAysDYAIrA18CXgIXAy8DXgIvA2ECYQIvAxgDYQIYA2ICNwJeBU0FNwJNBWMCZQJoBTkFZQI5BWQCZAI5BToFZAI6BWYCZgI6BTsFZgI7BWcCZwI7BTwFZwI8BWgCaAI8BT0FaAI9BWkCaQI9BT4FaQI+BWoCagI+BT8FagI/BWsCbQJABUEFbQJBBWwCbAJBBUIFbAJCBU8CbwImAy4DbwIuA24CcAJDBUQFcAJEBUACcgJIBUkFcgJJBXECcQJJBUoFcQJKBXMCcwJKBUsFcwJLBXQCdAJLBUwFdAJMBVYCOwJRBVIFOwJSBXUCdQJSBVMFdQJTBVICdgIpAxYDdgIWA0kCYgIYAxkDYgIZA3cCdwIZAxoDdwIaA3gCeAIaAxsDeAIbA3kCRgIdAx4DRgIeA3oCegIeAx8DegIfA3sCewIfAyADewIgA3wCfAIgAyEDfAIhA30CfQIhAyIDfQIiA34CgAIjAyQDgAIkA38CfwIkAyUDfwIlA2ACRAJjBWgFRAJoBWUCUQJlBWQFUQJkBYECWgJPBWIFWgJiBYICgQJkBWEFgQJhBUUCgwIsAy0DgwItA1kCSAIzAzQDSAI0AzoCggJiBWYFggJmBUsChAIyAyMDhAIjA4ACSgJQBWcFSgJnBTwCXwIrAyYDXwImA28CXQIcAzEDXQIxA0cCYwJNBV8FYwJfBYUChgIoAykDhgIpA3YChQJfBU4FhQJOBVwCfgIiAzIDfgIyA4QCbgIuAzwDbgI8A4cCQgJbBUgFQgJIBXICTgJWBUMFTgJDBXACGwMqA1QCGwNUAnkCWAInAygDWAIoA4YChwI8A4gCiQI3AywDiQIsA4oCiwI2AzgDiwI4A4wCjAI4AzcDjAI3A4kCigIsA4MCawI/BUAFawJABW0COQM7A40COQONAo4COgM5A44COgOOAo8CeARfBJACeASQAp4CPAM6A48CPAOPAogCOwM2A4sCOwOLAo0CiwKKAm0CiwJtAmwCiAKNAosCQAI/AogCcAJAAogCiwJsAk8CiwJPAk0CcAKIAosCTgJwAosCiwJNAkwCTAJOAosCWwJaAlMCUwJdAkcCRwJGAnoCegJ7AnwCfAJ9An4CfgKEAoACgAJ/AmACYAJfAm8CbwJuAocChwKIAj8ChwI/Aj4CYAJvAocCfgKAAmACegJ8An4CUwJHAnoCXAJbAlMChQJcAlMCUwJ6An4CfgJgAocChwI+Aj0ChwI9AlUChQJTAn4CYwKFAn4ChwJVAlcChwJXAlACNwJjAn4COAI3An4ChwJQAkMChwJDAkICQQI4An4CVgJBAn4CfgKHAkICfgJCAnICdAJWAn4CcwJ0An4CfgJyAnECfgJxAnMCrgKNBFkEWQSiArcCWQS3Aq4CkAJfBF4EawRQBJECkgJcBHMEkwJOBGkElAJbBHEElAJxBJUCkQJQBE8EZARNBJYCZASWApkClwJiBGEElwJhBJgClgJNBGMEYwRiBJcCYwSXApYCmQJlBGQEZgRlBJkCZwRmBJkCZwSZApoCmgJoBGcEaQRoBJoCaQSaApMCdARcBJICdASSApsCTwRqBJMCTwSTApECagROBJMCXQR1BJsCXQSbApwCXgR3BJwCXgScApACnAJ2BF0EcwRyBJ0CcwSdApICmwJ1BHQEdwR2BJwCngJ5BHgEegR5BJ4CnwJ7BHoEnwJ6BJ4CmAJ8BHsEmAJ7BJ8CUQRtBKACnQJyBFsEnQJbBJQCpAJVBFQEAQCgAqQCVAQBAKQCmAJhBGAEAABuBFEEAABRBKAC+gH7ARUDVwRWBKQCWgRwBKECWgShApUCbARrBJECbASRAqACpAJvBFcEoQKiAlkEWQRYBKMCWQSjAqECowJYBG8EowJvBKQClQJxBFoEgASBBAIAgAQCAKYCoAJtBGwEmAJgBHwEVgRVBKQChAShBKYCqASnBKUCpgSlBKcCrwSuBKgCrwSoAqkCqQSoBKUCqQSlAqwCpwSmBKcCpwSnAqUClQSUBK0ClQStAqsCsASvBKkCrgStBLECrgSxAqgCpAR+BKoCpASqAqcChwSIBAMAhwQDALQCAwCcBJsEAwCbBLQClwSWBKsClwSrArQCmQSYBLQCpQSkBKcCqgSpBKwClASLBK0ChgSHBLQCjASNBK4CjASuArMCrQKLBH0ErQJ9BLACfgR/BK8CfgSvAqoCfQSOBLACrQSsBLECAgCjBIMEAgCDBKYCsAKOBI8EqwKWBJUEjwSQBLICjwSyArACsgKQBJEEkgSTBLMCkwSMBLMCkQSSBLMCkQSzArICfwSABKYCfwSmAq8CrASrBKwCrASsArECqwSqBKwCmASXBLQCBACaBJkEBACZBLQCtQKeBJ0EtQKdBLQCtgKFBJ4EtgKeBLUCnwSFBLYCnwS2AqYCoASfBKYCogSEBKYCnQSGBLQCgwSiBKYCmwSKBAQAmwQEALQCoQSgBKYCogJwBLAEsASpArcCsAS3AqICiAOHA1wBiANcAV4BcASiAqECAQBUBFMEAABSBG4EBACKBJoEAwCJBJwEAwCIBIkEAgCCBKMEAgCBBIIEoAKRApMCkwKaApkCmQKWApcClwKYAqMCowKkAqACoAKTApkCmQKXAqMCmQKjAqACrwKmArYCtgK3AqkCqQKoArECsQKsAqUCpQKnAqoCqgKvArYCtgKpArECsQKlAqoCtgKxAqoCtgK1ArQCtAKrAq0CrQKwArICsgKzAq4CrgK3ArYCtgK0Aq0CrQKyAq4CrQKuArYCnwKeApACkAKcApsCmwKSAp0ClAKVAqECmwKdApQCnwKQApsCowKYAp8ClAKhAqMCnwKbApQClAKjAp8CkwHOAgoA2QEIAw8D2QEPA9gBMwUyBdYBMwXWAdcB"),t=e.length,s=new Uint8Array(t);for(let A=0;A<t;A++)s[A]=e.charCodeAt(A);return s.buffer}(),i=new Float32Array(s,0,4155).slice(),n=new Uint16Array(s,16620,6138).slice();return{interior:A.createMesh(t,!0,4,i.buffer,n)}}(r),g=function(A,e){const t=A.createMaterial("basic_za",{color:U(.5,.5,1),opacity:.5}),s=new nA(4,e.basic_za.contextData.vertexLayout),i=s.set(0),n=5e4;return i(0,U(-n,0,-n)),i(1,U(n,0,-n)),i(2,U(-n,0,n)),i(3,U(n,0,n)),A.createMesh(t,!0,5,s.view.buffer,s.size)}(r,this.materialTypes);return r.globalUniforms=w.initialUniforms,r.globalTextures=w.initialTextures,this.core=new re.Core(w.resolved,w.downloader,w.renderContext,w.materials,B,o,g,C,c.interior),r.commit(),I}async update(A,e,t,s){performance.mark("geometry_update_begin");const{hasChanges:i,resolved:n}=await(this.core?.update(A,e,this.assets.assets,this.assets.environments,t,s))??{hasChanges:!1,resolved:!1};i&&this.generation++,performance.mark("geometry_update_end"),performance.measure("geometry_update","geometry_update_begin","geometry_update_end"),performance.clearMarks();const r=performance.getEntriesByName("geometry_update")[0].duration;performance.clearMeasures();const{generation:o}=this;return{generation:o,updateTime:r,optimizeTime:0,resolved:n}}async dispose(){const{core:A}=this;A&&A.dispose()}}(re||(re={})).Core=class{resolved;downloader;renderContext;materials;geometry;environment;ocean;clippingBox;watermark;initialUniforms={};initialTextures={};existingInstances=[];geometries=[];grid;prevGridSettings;constructor(A,e,t,s,i,n,r,o,a){this.resolved=A,this.downloader=e,this.renderContext=t,this.materials=s,this.geometry=i,this.environment=n,this.ocean=r,this.clippingBox=o,this.watermark=a}dispose(){const{downloader:A,geometry:e}=this;A.abort(),e?.dispose()}setEnvironmentData(A){const{renderContext:e}=this,{environment:t}=this;if(!t)return;const{downloader:s}=t;if(s.activeDownloads>0&&s.abort(),t.id=A?.id,t.mesh.update({visible:void 0!==A}),e.globalTextures.irradiance&&e.deleteTexture(e.globalTextures.irradiance),e.globalTextures.radiance&&e.deleteTexture(e.globalTextures.radiance),t.background.textures.background&&e.deleteTexture(t.background.textures.background),A){const s=e.createEnvironmentTextures(A),{background:i,irradiance:n,radiance:r,lut:o}=s;e.globalTextures={...e.globalTextures,irradiance:n,radiance:r,ggx_lut:o},t.background.updateTextures({background:i})}else e.globalTextures={...e.globalTextures,irradiance:void 0,radiance:void 0},t.background.updateTextures({background:void 0})}async update(A,e,t,s,i,n){if(this.environment&&this.environment.id!=n.environment?.id){const A=s[n.environment?.id??-1];this.setEnvironmentData(A)}null!=this.grid&&oA(this.prevGridSettings,n.grid)||(this.grid?.majorLines.delete(),this.grid?.minorLines?.delete(),n.grid.enabled?this.grid=function(A,e){const t=E(D(),e.grid.origo),s=e.grid.axisX,i=e.grid.axisY,n=y(),r=y(),o=e.grid.majorLineCount,a=e.grid.minorLineCount;a>0&&(O(n,s,1/(a+1)),O(r,i,1/(a+1)));const w=[],B=[],I=O(y(),s,(o-1)/2),C=O(y(),i,(o-1)/2),c=y(),g=y();for(let A=0;A<o;++A){const e=A-(o-1)/2;if(O(c,s,e),w.push(j(y(),c,C)),w.push(G(y(),c,C)),a>0&&A!=o-1){z(g,c);for(let A=0;A<a;++A)j(g,g,n),B.push(j(y(),g,C)),B.push(G(y(),g,C))}if(O(c,i,e),w.push(j(y(),c,I)),w.push(G(y(),c,I)),a>0&&A!=o-1){z(g,c);for(let A=0;A<a;++A)j(g,g,r),B.push(j(y(),g,I)),B.push(G(y(),g,I))}}const l=A.createMaterial("basic",{color:e.grid.majorColor}),b=new Float32Array(w.flatMap((A=>[...A,0,0,0,0,0])));if(e.grid.minorLineCount>0){const s=A.createMaterial("basic",{color:e.grid.minorColor}),i=new Float32Array(B.flatMap((A=>[...A,0,0,0,0,0])));return{majorLines:A.createMesh(l,!0,1,b.buffer,w.length,void 0,t),minorLines:A.createMesh(s,!0,1,i.buffer,B.length,void 0,t)}}return{majorLines:A.createMesh(l,!0,1,b.buffer,w.length,void 0,t)}}(this.renderContext,n):this.grid=void 0,this.prevGridSettings=n.grid),this.clippingBox?.update({visible:n.clippingPlanes?.showBox??!1});const{geometry:r}=this,o=r?.update(A,i,n,this.renderContext.deviceProfile)??!0,{ocean:a}=n;let w={visible:a?.enabled??!1};if(a){const A={};a.color&&(A.color=a.color),a.opacity&&(A.opacity=a.opacity),Reflect.ownKeys(A).length>0&&(w.uniforms=A)}this.ocean.update(w),this.updateInstances(A,e,t,n);const{hasChanges:B}=this.renderContext;return await this.renderContext.commit(),{hasChanges:B,resolved:o}}updateInstances(A,e,t,s){const{existingInstances:i}=this;for(let n=0;n<e.length;n++){const r=i[n],o=e[n];if(!ne(r,o)){if(void 0===r&&void 0!==o){const A=t[o.assetId].createGeometry(this);A instanceof uA&&A.updateFromInstance(o),this.geometries[o.assetId]=A}else if(void 0!==r&&void 0===o)this.geometries[r.assetId].dispose();else if(void 0!==r&&void 0!==o){const e=this.geometries[o.assetId];e instanceof uA&&e.updateFromInstance(o),e.update(A,void 0,s,this.renderContext.deviceProfile)}i[n]=e[n]}}}},d=Array,r(new class{materialTypes;assets;scriptUrl;downloadImageFallback;initialize(A,e,t){return this.materialTypes=A,this.scriptUrl=e,this.assets=new JA(this.materialTypes,e),aA.downloadImageFallback=t,g(this.assets)}terminate(){"DedicatedWorkerGlobalScope"in self&&self.close()}async createAssets(A){return g({assets:g(this.assets),createScene:g((()=>g(new re(this.materialTypes,this.scriptUrl,this.assets))))})}});